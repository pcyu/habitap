"use strict";!function(e){var a={baseUrl:"http://localhost:3008",init:function(){},habitDashboard:function(){e(document).on("click","#t-habit-entry",function(){a.loadPage("habit-form"),e("#t-burger").prop("checked",!1)})},getUserPage:function(){e(document).on("submit","#get-protected",function(o){o.preventDefault();var n="Bearer "+localStorage.getItem("jwToken");return new Promise(function(o,t){e.ajax({headers:{accept:"application/json; odata=verbose",Authorization:n},type:"GET",url:a.baseUrl+"/protected",success:function(e){console.log(e),o()},error:function(e){console.log(e),t()}})})})},loadPage:function(a){var o=e("#root"),n="src/views/"+a+".html";e.get(n,function(a){e(o).html(a)})},loadProfile:function(o){var n="Bearer "+localStorage.getItem("jwToken");e.ajax({headers:{accept:"application/json; odata=verbose",Authorization:n},type:"GET",url:a.baseUrl+"/users/"+o,success:function(o){window.location.href=a.baseUrl+"/users/profile",e("#welcome").html("<span class='red'>Hello <b>Again</b></span>")},error:function(e){console.log(e)}})},loginExec:function(){e(document).on("submit","#login-submit",function(e){e.preventDefault(),a.loginHandler()})},loginHandler:function(){var o={username:e("#login-username").val(),password:e("#login-password").val()};e.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(o),headers:{accept:"application/json; odata=verbose"},type:"POST",url:"http://localhost:3008/auth/login",success:function(n){a.profile.name=n.profile.firstName+" "+n.profile.lastName,e("#login-username").val(""),e("#login-password").val(""),localStorage.setItem("jwToken",n.profile.token),a.loadProfile(o.username)},error:function(a){console.log(a),e("#t-modal-login").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                <div id="t-modal-login-fail">Your login attempt has failed, please try again.</div>\n                <a id="t-modal-login-button">Login</a>\n                ')}})},loginModal:function(){e(document).on("click","#t-login",function(a){a.preventDefault(),e(".y-modal.signup").hasClass("active")?(e(".y-modal.signup").removeClass("active"),e(".y-modal.login").addClass("active")):e(".y-modal.login").toggleClass("active"),e("#t-burger").prop("checked",!1)})},logoutHandler:function(){e(document).on("click","#t-logout",function(e){e.preventDefault(),localStorage.removeItem("jwToken"),console.log("You are now logged out."),a.profile.name="",location.reload(!0)})},profile:{name:""},signUpHandler:function(){e(document).on("click","#t-sign-up",function(){e(".y-modal.login").hasClass("active")?(e(".y-modal.login").removeClass("active"),e(".y-modal.signup").addClass("active")):e(".y-modal.signup").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("submit","#sign-up-submit",function(o){o.preventDefault();var n={firstName:e("#firstName").val(),lastName:e("#lastName").val(),password:e("#password").val(),username:e("#username").val()};return new Promise(function(o,t){e.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(n),headers:{accept:"application/json; odata=verbose"},type:"POST",url:a.baseUrl+"/users/register",success:function(a){console.log("Thank you "+n.firstName+" "+n.lastName+"! Your account has been created."),e("#firstName").val(""),e("#lastName").val(""),e("#username").val(""),e("#password").val(""),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                  <div id="t-modal-sign-up-success">Thank you '+n.firstName+" "+n.lastName+'! Your account has been created.</div>\n                  <a id="t-modal-login-button">Login</a>\n                  '),o()},error:function(a){console.log(a),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                  <div id="t-modal-sign-up-fail">'+n.firstName+" "+n.lastName+', Either your password needs to be ten characters long, or your username has already been selected.</div>\n                  <a id="t-modal-sign-up-button">Sign-up</a>\n                  '),t()}})})})}};e(window).on("load",function(){a.init()})}(window.jQuery),function(e){var a={box:function(){e("body").append('\n        <div class="viewport">\n          <span id="t-width"></span> x <span id="t-height"></span>\n        </div>\n      ')},calculateDimensions:function(){var a=window.innerWidth,o=window.innerHeight;e("#t-width").html(a),e("#t-height").html(o)},init:function(){a.box(),a.sizer()},sizer:function(){a.calculateDimensions(),a.toggleBox()},toggleBox:function(){e(".viewport").click(function(){e(this).toggleClass("inactive")})}};e(window).on("load",function(){a.init()}),e(window).on("resize",function(){a.sizer()})}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzaXplci5qcyJdLCJuYW1lcyI6WyIkIiwiYXBwIiwiYmFzZVVybCIsImluaXQiLCJoYWJpdERhc2hib2FyZCIsImRvY3VtZW50Iiwib24iLCJsb2FkUGFnZSIsInByb3AiLCJnZXRVc2VyUGFnZSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIl90b2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJQcm9taXNlIiwicmVzIiwicmVqIiwiYWpheCIsImhlYWRlcnMiLCJhY2NlcHQiLCJBdXRob3JpemF0aW9uIiwidHlwZSIsInVybCIsInN1Y2Nlc3MiLCJpdGVtIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiX2Vycm9yIiwicGFnZSIsInRhcmdldCIsIl9wYWdlIiwiZ2V0IiwiZGF0YSIsImh0bWwiLCJsb2FkUHJvZmlsZSIsInVzZXJuYW1lIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiX2Vycm9yMiIsImxvZ2luRXhlYyIsImxvZ2luSGFuZGxlciIsIl9ib2R5IiwidmFsIiwicGFzc3dvcmQiLCJjb250ZW50VHlwZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9maWxlIiwibmFtZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwic2V0SXRlbSIsInRva2VuIiwiX2Vycm9yMyIsInJlbW92ZUNsYXNzIiwiZW1wdHkiLCJhZGRDbGFzcyIsImFwcGVuZCIsImxvZ2luTW9kYWwiLCJoYXNDbGFzcyIsInRvZ2dsZUNsYXNzIiwibG9nb3V0SGFuZGxlciIsInJlbW92ZUl0ZW0iLCJyZWxvYWQiLCJzaWduVXBIYW5kbGVyIiwiYm9keSIsIl9lcnJvcjQiLCJqUXVlcnkiLCJib3giLCJjYWxjdWxhdGVEaW1lbnNpb25zIiwidyIsImlubmVyV2lkdGgiLCJoIiwiaW5uZXJIZWlnaHQiLCJzaXplciIsInRvZ2dsZUJveCIsImNsaWNrIiwidGhpcyJdLCJtYXBwaW5ncyI6IkFBQUEsY0FFQSxTQUFBQSxHQUVBLElBQUFDLEdBQ0FDLFFBQUEsd0JB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QUFBRSxTQXZNQSxDQXlNQW1DLE9BQUFnQyxRQ3pNQSxTQUFBdEUsR0FFQSxJQUFBQyxHQUNBc0UsSUFBQSxXQUNBdkUsRUFBQSxRQUFBNEQsT0FBQSxpSUFFQVksb0JBQUEsV0FDQSxJQUFBQyxFQUFBbkMsT0FBQW9DLFdBQ0FDLEVBQUFyQyxPQUFBc0MsWUFDQTVFLEVBQUEsWUFBQW1DLEtBQUFzQyxHQUNBekUsRUFBQSxhQUFBbUMsS0FBQXdDLElBRUF4RSxLQUFBLFdBQ0FGLEVBQUFzRSxNQUNBdEUsRUFBQTRFLFNBRUFBLE1BQUEsV0FDQTVFLEVBQUF1RSxzQkFDQXZFLEVBQUE2RSxhQUVBQSxVQUFBLFdBQ0E5RSxFQUFBLGFBQUErRSxNQUFBLFdBQ0EvRSxFQUFBZ0YsTUFBQWpCLFlBQUEsZ0JBS0EvRCxFQUFBc0MsUUFBQWhDLEdBQUEsT0FBQSxXQUNBTCxFQUFBRSxTQUdBSCxFQUFBc0MsUUFBQWhDLEdBQUEsU0FBQSxXQUNBTCxFQUFBNEUsVUFoQ0EsQ0FrQ0F2QyxPQUFBZ0MiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgdmFyIGFwcCA9IHtcbiAgICBiYXNlVXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDA4JyxcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgLy8gYXBwLmhhYml0RGFzaGJvYXJkKCk7XG4gICAgICAvLyBhcHAuZ2V0VXNlclBhZ2UoKTtcbiAgICAgIC8vIGFwcC5sb2dpbkV4ZWMoKTtcbiAgICAgIC8vIGFwcC5sb2dpbk1vZGFsKCk7XG4gICAgICAvLyBhcHAubG9nb3V0SGFuZGxlcigpO1xuICAgICAgLy8gYXBwLnNpZ25VcEhhbmRsZXIoKTtcbiAgICB9LFxuICAgIGhhYml0RGFzaGJvYXJkOiBmdW5jdGlvbiBoYWJpdERhc2hib2FyZCgpIHtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjdC1oYWJpdC1lbnRyeScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYXBwLmxvYWRQYWdlKFwiaGFiaXQtZm9ybVwiKTtcbiAgICAgICAgJCgnI3QtYnVyZ2VyJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgIH0pO1xuICAgICAgLy8gJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0LWhhYml0LWhpc3RvcnknLCAoKSA9PiB7XG4gICAgICAvLyAgICQoJyN0LWJ1cmdlcicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICAvLyB9KTtcbiAgICB9LFxuICAgIGdldFVzZXJQYWdlOiBmdW5jdGlvbiBnZXRVc2VyUGFnZSgpIHtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCAnI2dldC1wcm90ZWN0ZWQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBfdG9rZW4gPSAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnandUb2tlbicpO1xuICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikge1xuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAvLyBiZWZvcmVTZW5kOiAocmVxKSA9PiB7IHJlcS5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBhcHAudG9rZW4pIH0sXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgIFwiYWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvbjsgb2RhdGE9dmVyYm9zZVwiLFxuICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogX3Rva2VuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6IGFwcC5iYXNlVXJsICsgJy9wcm90ZWN0ZWQnLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhpdGVtKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xuICAgICAgICAgICAgICByZXMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoX2Vycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9lcnJvcik7XG4gICAgICAgICAgICAgIHJlaigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGxvYWRQYWdlOiBmdW5jdGlvbiBsb2FkUGFnZShwYWdlKSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gJCgnI3Jvb3QnKTtcbiAgICAgIHZhciBfcGFnZSA9ICdzcmMvdmlld3MvJyArIHBhZ2UgKyAnLmh0bWwnO1xuICAgICAgJC5nZXQoX3BhZ2UsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICQodGFyZ2V0KS5odG1sKGRhdGEpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBsb2FkUHJvZmlsZTogZnVuY3Rpb24gbG9hZFByb2ZpbGUodXNlcm5hbWUpIHtcbiAgICAgIHZhciBfdG9rZW4gPSAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnandUb2tlbicpO1xuICAgICAgLy8gICAgICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICAkLmFqYXgoe1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJhY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBvZGF0YT12ZXJib3NlXCIsXG4gICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IF90b2tlblxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgdXJsOiBhcHAuYmFzZVVybCArICcvdXNlcnMvJyArIHVzZXJuYW1lLFxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGl0ZW0pIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGFwcC5iYXNlVXJsICsgJy91c2Vycy9wcm9maWxlJztcblxuICAgICAgICAgICQoJyN3ZWxjb21lJykuaHRtbChcIjxzcGFuIGNsYXNzPSdyZWQnPkhlbGxvIDxiPkFnYWluPC9iPjwvc3Bhbj5cIik7XG5cbiAgICAgICAgICAvLyAgICAgICAgICAgICAgcmVzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3IyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coX2Vycm9yMik7XG4gICAgICAgICAgLy8gICAgICAgICAgICAgIHJlaigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vICAgICAgICB9KTtcbiAgICAgIC8vICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9LFxuICAgIGxvZ2luRXhlYzogZnVuY3Rpb24gbG9naW5FeGVjKCkge1xuICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjbG9naW4tc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhcHAubG9naW5IYW5kbGVyKCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGxvZ2luSGFuZGxlcjogZnVuY3Rpb24gbG9naW5IYW5kbGVyKCkge1xuICAgICAgdmFyIF9ib2R5ID0ge1xuICAgICAgICB1c2VybmFtZTogJCgnI2xvZ2luLXVzZXJuYW1lJykudmFsKCksXG4gICAgICAgIHBhc3N3b3JkOiAkKCcjbG9naW4tcGFzc3dvcmQnKS52YWwoKVxuICAgICAgfTtcbiAgICAgIC8vICAgICAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgJC5hamF4KHtcbiAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLFxuICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShfYm9keSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb247IG9kYXRhPXZlcmJvc2VcIlxuICAgICAgICB9LFxuICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwOC9hdXRoL2xvZ2luJyxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XG4gICAgICAgICAgYXBwLnByb2ZpbGUubmFtZSA9IGRhdGEucHJvZmlsZS5maXJzdE5hbWUgKyAnICcgKyBkYXRhLnByb2ZpbGUubGFzdE5hbWU7XG4gICAgICAgICAgJCgnI2xvZ2luLXVzZXJuYW1lJykudmFsKCcnKTtcbiAgICAgICAgICAkKCcjbG9naW4tcGFzc3dvcmQnKS52YWwoJycpO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdqd1Rva2VuJywgZGF0YS5wcm9maWxlLnRva2VuKTtcbiAgICAgICAgICBhcHAubG9hZFByb2ZpbGUoX2JvZHkudXNlcm5hbWUpO1xuICAgICAgICAgIC8vICAgICAgICAgICAgICByZXMoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKF9lcnJvcjMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhfZXJyb3IzKTtcbiAgICAgICAgICAkKFwiI3QtbW9kYWwtbG9naW5cIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuZW1wdHkoKTtcbiAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5hcHBlbmQoJ1xcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwidC1tb2RhbC1sb2dpbi1mYWlsXCI+WW91ciBsb2dpbiBhdHRlbXB0IGhhcyBmYWlsZWQsIHBsZWFzZSB0cnkgYWdhaW4uPC9kaXY+XFxuICAgICAgICAgICAgICAgIDxhIGlkPVwidC1tb2RhbC1sb2dpbi1idXR0b25cIj5Mb2dpbjwvYT5cXG4gICAgICAgICAgICAgICAgJyk7XG4gICAgICAgICAgLy8gICAgICAgICAgICAgIHJlaigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vICAgICAgICB9KTtcbiAgICAgIC8vICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9LFxuICAgIGxvZ2luTW9kYWw6IGZ1bmN0aW9uIGxvZ2luTW9kYWwoKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3QtbG9naW4nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICgkKCcueS1tb2RhbC5zaWdudXAnKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAkKCcueS1tb2RhbC5zaWdudXAnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgJCgnLnktbW9kYWwubG9naW4nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJCgnLnktbW9kYWwubG9naW4nKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnI3QtYnVyZ2VyJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgbG9nb3V0SGFuZGxlcjogZnVuY3Rpb24gbG9nb3V0SGFuZGxlcigpIHtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjdC1sb2dvdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdqd1Rva2VuJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdZb3UgYXJlIG5vdyBsb2dnZWQgb3V0LicpO1xuICAgICAgICBhcHAucHJvZmlsZS5uYW1lID0gJyc7XG4gICAgICAgIGxvY2F0aW9uLnJlbG9hZCh0cnVlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcHJvZmlsZToge1xuICAgICAgbmFtZTogJydcbiAgICB9LFxuICAgIHNpZ25VcEhhbmRsZXI6IGZ1bmN0aW9uIHNpZ25VcEhhbmRsZXIoKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3Qtc2lnbi11cCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgIGlmICgkKCcueS1tb2RhbC5sb2dpbicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICQoJy55LW1vZGFsLmxvZ2luJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICQoJy55LW1vZGFsLnNpZ251cCcpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKCcueS1tb2RhbC5zaWdudXAnKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgJCgnI3QtYnVyZ2VyJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgIH0pO1xuICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjc2lnbi11cC1zdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBib2R5ID0ge1xuICAgICAgICAgIGZpcnN0TmFtZTogJCgnI2ZpcnN0TmFtZScpLnZhbCgpLFxuICAgICAgICAgIGxhc3ROYW1lOiAkKCcjbGFzdE5hbWUnKS52YWwoKSxcbiAgICAgICAgICBwYXNzd29yZDogJCgnI3Bhc3N3b3JkJykudmFsKCksXG4gICAgICAgICAgdXNlcm5hbWU6ICQoJyN1c2VybmFtZScpLnZhbCgpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIixcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICBcImFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb247IG9kYXRhPXZlcmJvc2VcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogYXBwLmJhc2VVcmwgKyAnL3VzZXJzL3JlZ2lzdGVyJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVGhhbmsgeW91ICcgKyBib2R5LmZpcnN0TmFtZSArICcgJyArIGJvZHkubGFzdE5hbWUgKyAnISBZb3VyIGFjY291bnQgaGFzIGJlZW4gY3JlYXRlZC4nKTtcbiAgICAgICAgICAgICAgJCgnI2ZpcnN0TmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICQoJyNsYXN0TmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICQoJyN1c2VybmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICQoJyNwYXNzd29yZCcpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1zaWduLXVwXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5lbXB0eSgpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuYXBwZW5kKCdcXG4gICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwidC1tb2RhbC1zaWduLXVwLXN1Y2Nlc3NcIj5UaGFuayB5b3UgJyArIGJvZHkuZmlyc3ROYW1lICsgJyAnICsgYm9keS5sYXN0TmFtZSArICchIFlvdXIgYWNjb3VudCBoYXMgYmVlbiBjcmVhdGVkLjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgIDxhIGlkPVwidC1tb2RhbC1sb2dpbi1idXR0b25cIj5Mb2dpbjwvYT5cXG4gICAgICAgICAgICAgICAgICAnKTtcbiAgICAgICAgICAgICAgcmVzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKF9lcnJvcjQpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coX2Vycm9yNCk7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1zaWduLXVwXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5lbXB0eSgpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuYXBwZW5kKCdcXG4gICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwidC1tb2RhbC1zaWduLXVwLWZhaWxcIj4nICsgYm9keS5maXJzdE5hbWUgKyAnICcgKyBib2R5Lmxhc3ROYW1lICsgJywgRWl0aGVyIHlvdXIgcGFzc3dvcmQgbmVlZHMgdG8gYmUgdGVuIGNoYXJhY3RlcnMgbG9uZywgb3IgeW91ciB1c2VybmFtZSBoYXMgYWxyZWFkeSBiZWVuIHNlbGVjdGVkLjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgIDxhIGlkPVwidC1tb2RhbC1zaWduLXVwLWJ1dHRvblwiPlNpZ24tdXA8L2E+XFxuICAgICAgICAgICAgICAgICAgJyk7XG4gICAgICAgICAgICAgIHJlaigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgIGFwcC5pbml0KCk7XG4gIH0pO1xufSkod2luZG93LmpRdWVyeSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoJCkge1xuXG4gIHZhciBhcHAgPSB7XG4gICAgYm94OiBmdW5jdGlvbiBib3goKSB7XG4gICAgICAkKCdib2R5JykuYXBwZW5kKFwiXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ2aWV3cG9ydFxcXCI+XFxuICAgICAgICAgIDxzcGFuIGlkPVxcXCJ0LXdpZHRoXFxcIj48L3NwYW4+IHggPHNwYW4gaWQ9XFxcInQtaGVpZ2h0XFxcIj48L3NwYW4+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICBcIik7XG4gICAgfSxcbiAgICBjYWxjdWxhdGVEaW1lbnNpb25zOiBmdW5jdGlvbiBjYWxjdWxhdGVEaW1lbnNpb25zKCkge1xuICAgICAgdmFyIHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIHZhciBoID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgJChcIiN0LXdpZHRoXCIpLmh0bWwodyk7XG4gICAgICAkKFwiI3QtaGVpZ2h0XCIpLmh0bWwoaCk7XG4gICAgfSxcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgYXBwLmJveCgpO1xuICAgICAgYXBwLnNpemVyKCk7XG4gICAgfSxcbiAgICBzaXplcjogZnVuY3Rpb24gc2l6ZXIoKSB7XG4gICAgICBhcHAuY2FsY3VsYXRlRGltZW5zaW9ucygpO1xuICAgICAgYXBwLnRvZ2dsZUJveCgpO1xuICAgIH0sXG4gICAgdG9nZ2xlQm94OiBmdW5jdGlvbiB0b2dnbGVCb3goKSB7XG4gICAgICAkKCcudmlld3BvcnQnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2luYWN0aXZlJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgIGFwcC5pbml0KCk7IC8vYzAyOFxuICB9KTtcblxuICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICBhcHAuc2l6ZXIoKTsgLy9jMDI4XG4gIH0pO1xufSkod2luZG93LmpRdWVyeSk7Il19
