"use strict";!function(o){var n={baseUrl:"http://localhost:3008",name:"",init:function(){n.doLogin(),n.getProtected(),n.logoutHandler(),n.signUpHandler()},doLogin:function(){o(document).on("click","#t-login",function(){o("#t-modal-sign-up").removeClass("active"),o("#t-modal-login").addClass("active")}),o(document).on("submit","#login-submit",function(o){o.preventDefault(),n.loginHandler().then(n.loadEndpoint)})},getProtected:function(){o(document).on("submit","#get-protected",function(e){e.preventDefault();var t="Bearer "+localStorage.getItem("jwToken");return new Promise(function(e,a){o.ajax({headers:{accept:"application/json; odata=verbose",Authorization:t},type:"GET",url:n.baseUrl+"/protected",success:function(o){console.log(o),e()},error:function(o){console.log(o),a()}})})})},loadEndpoint:function(){var e="Bearer "+localStorage.getItem("jwToken");return new Promise(function(t,a){o.ajax({headers:{accept:"application/json; odata=verbose",Authorization:e},type:"GET",url:n.baseUrl+"/protected",success:function(o){n.loadPage("protected"),t()},error:function(o){console.log(o),a()}})})},loginHandler:function(){var e={username:o("#login-username").val(),password:o("#login-password").val()};return new Promise(function(t,a){o.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(e),headers:{accept:"application/json; odata=verbose"},type:"POST",url:"http://localhost:3008/auth/login",success:function(e){n.name=e.profile.firstName+" "+e.profile.lastName,o("#login-username").val(""),o("#login-password").val(""),localStorage.setItem("jwToken",e.profile.token),console.log("Welcome "+n.name+"! You are now logged in."),t()},error:function(o){console.log(o),a()}})})},logoutHandler:function(){o(document).on("submit","#do-logout",function(o){o.preventDefault(),localStorage.removeItem("jwToken"),console.log("You are now logged out."),n.name="",location.reload(!0)})},signUpHandler:function(){o(document).on("click","#t-sign-up",function(){o("#t-modal-login").removeClass("active"),o("#t-modal-sign-up").addClass("active")}),o(document).on("submit","#sign-up-submit",function(e){e.preventDefault();var t={firstName:o("#firstName").val(),lastName:o("#lastName").val(),password:o("#password").val(),username:o("#username").val()};return new Promise(function(e,a){o.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(t),headers:{accept:"application/json; odata=verbose"},type:"POST",url:n.baseUrl+"/users/register",success:function(n){console.log("Thank you "+t.firstName+" "+t.lastName+"! Your account has been created."),o("#firstName").val(""),o("#lastName").val(""),o("#username").val(""),o("#password").val(""),e()},error:function(o){console.log(o),a()}})})})},loadPage:function(n){var e=o("#root"),t="src/templates/"+n+".html";o.get(t,function(n){o(e).html(n)})}};o(window).on("load",function(){n.init(),n.loadPage("landing")}),o(window).on("resize",function(){n.sizer()})}(window.jQuery),function(o){var n={box:function(){o("body").append('\n        <div class="viewport">\n          <span id="t-width"></span> x <span id="t-height"></span>\n        </div>\n      ')},calculateDimensions:function(){var n=window.innerWidth,e=window.innerHeight;o("#t-width").html(n),o("#t-height").html(e)},init:function(){n.box(),n.sizer()},sizer:function(){n.calculateDimensions(),n.toggleBox()},toggleBox:function(){o(".viewport").click(function(){o(this).toggleClass("inactive")})}};o(window).on("load",function(){n.init()}),o(window).on("resize",function(){n.sizer()})}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzaXplci5qcyJdLCJuYW1lcyI6WyIkIiwiYXBwIiwiYmFzZVVybCIsIm5hbWUiLCJpbml0IiwiZG9Mb2dpbiIsImdldFByb3RlY3RlZCIsImxvZ291dEhhbmRsZXIiLCJzaWduVXBIYW5kbGVyIiwiZG9jdW1lbnQiLCJvbiIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJlIiwicHJldmVudERlZmF1bHQiLCJsb2dpbkhhbmRsZXIiLCJ0aGVuIiwibG9hZEVuZHBvaW50IiwiX3Rva2VuIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIlByb21pc2UiLCJyZXMiLCJyZWoiLCJhamF4IiwiaGVhZGVycyIsImFjY2VwdCIsIkF1dGhvcml6YXRpb24iLCJ0eXBlIiwidXJsIiwic3VjY2VzcyIsIml0ZW0iLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJfZXJyb3IiLCJsb2FkUGFnZSIsIl9lcnJvcjIiLCJfYm9keSIsInVzZXJuYW1lIiwidmFsIiwicGFzc3dvcmQiLCJjb250ZW50VHlwZSIsImRhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwicHJvZmlsZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwic2V0SXRlbSIsInRva2VuIiwiX2Vycm9yMyIsInJlbW92ZUl0ZW0iLCJsb2NhdGlvbiIsInJlbG9hZCIsImJvZHkiLCJfZXJyb3I0IiwicGFnZSIsInRhcmdldCIsIl9wYWdlIiwiZ2V0IiwiaHRtbCIsIndpbmRvdyIsInNpemVyIiwialF1ZXJ5IiwiYm94IiwiYXBwZW5kIiwiY2FsY3VsYXRlRGltZW5zaW9ucyIsInciLCJpbm5lcldpZHRoIiwiaCIsImlubmVySGVpZ2h0IiwidG9nZ2xlQm94IiwiY2xpY2siLCJ0aGlzIiwidG9nZ2xlQ2xhc3MiXSwibWFwcGluZ3MiOiJBQUFBLGNBRUEsU0FBQUEsR0FFQSxJQUFBQyxHQUNBQyxRQUFBLHdCQUNBQyxLQUFBLEdBQ0FDLEtBQUEsV0FDQUgsRUFBQUksVUFDQUosRUFBQUssZUFDQUwsRUFBQU0s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LElBQUEsSUFDQXhDLEVBQUEsYUFBQXdDLElBQUEsSUFDQXhDLEVBQUEsYUFBQXdDLElBQUEsSUFDQXhDLEVBQUEsYUFBQXdDLElBQUEsSUFDQWxCLEtBRUFZLE1BQUEsU0FBQXNCLEdBQ0F4QixRQUFBQyxJQUFBdUIsR0FDQWpDLFlBT0FhLFNBQUEsU0FBQXFCLEdBQ0EsSUFBQUMsRUFBQTFELEVBQUEsU0FDQTJELEVBQUEsaUJBQUFGLEVBQUEsUUFFQXpELEVBQUE0RCxJQUFBRCxFQUFBLFNBQUFoQixHQUNBM0MsRUFBQTBELEdBQUFHLEtBQUFsQixPQUtBM0MsRUFBQThELFFBQUFwRCxHQUFBLE9BQUEsV0FDQVQsRUFBQUcsT0FDQUgsRUFBQW1DLFNBQUEsYUFHQXBDLEVBQUE4RCxRQUFBcEQsR0FBQSxTQUFBLFdBQ0FULEVBQUE4RCxVQXJLQSxDQXVLQUQsT0FBQUUsUUN2S0EsU0FBQWhFLEdBRUEsSUFBQUMsR0FDQWdFLElBQUEsV0FDQWpFLEVBQUEsUUFBQWtFLE9BQUEsaUlBRUFDLG9CQUFBLFdBQ0EsSUFBQUMsRUFBQU4sT0FBQU8sV0FDQUMsRUFBQVIsT0FBQVMsWUFDQXZFLEVBQUEsWUFBQTZELEtBQUFPLEdBQ0FwRSxFQUFBLGFBQUE2RCxLQUFBUyxJQUVBbEUsS0FBQSxXQUNBSCxFQUFBZ0UsTUFDQWhFLEVBQUE4RCxTQUVBQSxNQUFBLFdBQ0E5RCxFQUFBa0Usc0JBQ0FsRSxFQUFBdUUsYUFFQUEsVUFBQSxXQUNBeEUsRUFBQSxhQUFBeUUsTUFBQSxXQUNBekUsRUFBQTBFLE1BQUFDLFlBQUEsZ0JBS0EzRSxFQUFBOEQsUUFBQXBELEdBQUEsT0FBQSxXQUNBVCxFQUFBRyxTQUdBSixFQUFBOEQsUUFBQXBELEdBQUEsU0FBQSxXQUNBVCxFQUFBOEQsVUFoQ0EsQ0FrQ0FELE9BQUFFIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoJCkge1xuXG4gIHZhciBhcHAgPSB7XG4gICAgYmFzZVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwOCcsXG4gICAgbmFtZTogJycsXG4gICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIGFwcC5kb0xvZ2luKCk7XG4gICAgICBhcHAuZ2V0UHJvdGVjdGVkKCk7XG4gICAgICBhcHAubG9nb3V0SGFuZGxlcigpO1xuICAgICAgYXBwLnNpZ25VcEhhbmRsZXIoKTtcbiAgICB9LFxuICAgIGRvTG9naW46IGZ1bmN0aW9uIGRvTG9naW4oKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3QtbG9naW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjdC1tb2RhbC1zaWduLXVwXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKFwiI3QtbW9kYWwtbG9naW5cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICB9KTtcblxuICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjbG9naW4tc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhcHAubG9naW5IYW5kbGVyKCkudGhlbihhcHAubG9hZEVuZHBvaW50KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0UHJvdGVjdGVkOiBmdW5jdGlvbiBnZXRQcm90ZWN0ZWQoKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignc3VibWl0JywgJyNnZXQtcHJvdGVjdGVkJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgX3Rva2VuID0gJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3VG9rZW4nKTtcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHtcbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgLy8gYmVmb3JlU2VuZDogKHJlcSkgPT4geyByZXEuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIiwgYXBwLnRva2VuKSB9LFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICBcImFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb247IG9kYXRhPXZlcmJvc2VcIixcbiAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IF90b2tlblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiBhcHAuYmFzZVVybCArICcvcHJvdGVjdGVkJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoaXRlbSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKTtcbiAgICAgICAgICAgICAgcmVzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKF9lcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfZXJyb3IpO1xuICAgICAgICAgICAgICByZWooKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBsb2FkRW5kcG9pbnQ6IGZ1bmN0aW9uIGxvYWRFbmRwb2ludCgpIHtcbiAgICAgIHZhciBfdG9rZW4gPSAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnandUb2tlbicpO1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAvLyBiZWZvcmVTZW5kOiAocmVxKSA9PiB7IHJlcS5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBhcHAudG9rZW4pIH0sXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJhY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBvZGF0YT12ZXJib3NlXCIsXG4gICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogX3Rva2VuXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICB1cmw6IGFwcC5iYXNlVXJsICsgJy9wcm90ZWN0ZWQnLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoaXRlbSkge1xuICAgICAgICAgICAgYXBwLmxvYWRQYWdlKCdwcm90ZWN0ZWQnKTtcbiAgICAgICAgICAgIHJlcygpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKF9lcnJvcjIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9lcnJvcjIpO1xuICAgICAgICAgICAgcmVqKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfSxcbiAgICBsb2dpbkhhbmRsZXI6IGZ1bmN0aW9uIGxvZ2luSGFuZGxlcigpIHtcbiAgICAgIHZhciBfYm9keSA9IHtcbiAgICAgICAgdXNlcm5hbWU6ICQoJyNsb2dpbi11c2VybmFtZScpLnZhbCgpLFxuICAgICAgICBwYXNzd29yZDogJCgnI2xvZ2luLXBhc3N3b3JkJykudmFsKClcbiAgICAgIH07XG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIixcbiAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShfYm9keSksXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJhY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBvZGF0YT12ZXJib3NlXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDgvYXV0aC9sb2dpbicsXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XG4gICAgICAgICAgICBhcHAubmFtZSA9IGRhdGEucHJvZmlsZS5maXJzdE5hbWUgKyAnICcgKyBkYXRhLnByb2ZpbGUubGFzdE5hbWU7XG4gICAgICAgICAgICAkKCcjbG9naW4tdXNlcm5hbWUnKS52YWwoJycpO1xuICAgICAgICAgICAgJCgnI2xvZ2luLXBhc3N3b3JkJykudmFsKCcnKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdqd1Rva2VuJywgZGF0YS5wcm9maWxlLnRva2VuKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXZWxjb21lICcgKyBhcHAubmFtZSArICchIFlvdSBhcmUgbm93IGxvZ2dlZCBpbi4nKTtcbiAgICAgICAgICAgIHJlcygpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKF9lcnJvcjMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9lcnJvcjMpO1xuICAgICAgICAgICAgcmVqKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfSxcbiAgICBsb2dvdXRIYW5kbGVyOiBmdW5jdGlvbiBsb2dvdXRIYW5kbGVyKCkge1xuICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjZG8tbG9nb3V0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnandUb2tlbicpO1xuICAgICAgICBjb25zb2xlLmxvZygnWW91IGFyZSBub3cgbG9nZ2VkIG91dC4nKTtcbiAgICAgICAgYXBwLm5hbWUgPSAnJztcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBzaWduVXBIYW5kbGVyOiBmdW5jdGlvbiBzaWduVXBIYW5kbGVyKCkge1xuICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0LXNpZ24tdXAnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjdC1tb2RhbC1sb2dpblwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJChcIiN0LW1vZGFsLXNpZ24tdXBcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICB9KTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCAnI3NpZ24tdXAtc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgYm9keSA9IHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICQoJyNmaXJzdE5hbWUnKS52YWwoKSxcbiAgICAgICAgICBsYXN0TmFtZTogJCgnI2xhc3ROYW1lJykudmFsKCksXG4gICAgICAgICAgcGFzc3dvcmQ6ICQoJyNwYXNzd29yZCcpLnZhbCgpLFxuICAgICAgICAgIHVzZXJuYW1lOiAkKCcjdXNlcm5hbWUnKS52YWwoKVxuICAgICAgICB9O1xuICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikge1xuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgXCJhY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBvZGF0YT12ZXJib3NlXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IGFwcC5iYXNlVXJsICsgJy91c2Vycy9yZWdpc3RlcicsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1RoYW5rIHlvdSAnICsgYm9keS5maXJzdE5hbWUgKyAnICcgKyBib2R5Lmxhc3ROYW1lICsgJyEgWW91ciBhY2NvdW50IGhhcyBiZWVuIGNyZWF0ZWQuJyk7XG4gICAgICAgICAgICAgICQoJyNmaXJzdE5hbWUnKS52YWwoJycpO1xuICAgICAgICAgICAgICAkKCcjbGFzdE5hbWUnKS52YWwoJycpO1xuICAgICAgICAgICAgICAkKCcjdXNlcm5hbWUnKS52YWwoJycpO1xuICAgICAgICAgICAgICAkKCcjcGFzc3dvcmQnKS52YWwoJycpO1xuICAgICAgICAgICAgICByZXMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoX2Vycm9yNCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfZXJyb3I0KTtcbiAgICAgICAgICAgICAgcmVqKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgbG9hZFBhZ2U6IGZ1bmN0aW9uIGxvYWRQYWdlKHBhZ2UpIHtcbiAgICAgIHZhciB0YXJnZXQgPSAkKCcjcm9vdCcpO1xuICAgICAgdmFyIF9wYWdlID0gJ3NyYy90ZW1wbGF0ZXMvJyArIHBhZ2UgKyAnLmh0bWwnO1xuICAgICAgLy8gJCh0YXJnZXQpLmh0bWwoX3BhZ2UpO1xuICAgICAgJC5nZXQoX3BhZ2UsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICQodGFyZ2V0KS5odG1sKGRhdGEpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBhcHAuaW5pdCgpO1xuICAgIGFwcC5sb2FkUGFnZShcImxhbmRpbmdcIik7XG4gIH0pO1xuXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgIGFwcC5zaXplcigpOyAvL2MwMDdcbiAgfSk7XG59KSh3aW5kb3cualF1ZXJ5KTsiLCJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgdmFyIGFwcCA9IHtcbiAgICBib3g6IGZ1bmN0aW9uIGJveCgpIHtcbiAgICAgICQoJ2JvZHknKS5hcHBlbmQoXCJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInZpZXdwb3J0XFxcIj5cXG4gICAgICAgICAgPHNwYW4gaWQ9XFxcInQtd2lkdGhcXFwiPjwvc3Bhbj4geCA8c3BhbiBpZD1cXFwidC1oZWlnaHRcXFwiPjwvc3Bhbj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIFwiKTtcbiAgICB9LFxuICAgIGNhbGN1bGF0ZURpbWVuc2lvbnM6IGZ1bmN0aW9uIGNhbGN1bGF0ZURpbWVuc2lvbnMoKSB7XG4gICAgICB2YXIgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgdmFyIGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAkKFwiI3Qtd2lkdGhcIikuaHRtbCh3KTtcbiAgICAgICQoXCIjdC1oZWlnaHRcIikuaHRtbChoKTtcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICBhcHAuYm94KCk7XG4gICAgICBhcHAuc2l6ZXIoKTtcbiAgICB9LFxuICAgIHNpemVyOiBmdW5jdGlvbiBzaXplcigpIHtcbiAgICAgIGFwcC5jYWxjdWxhdGVEaW1lbnNpb25zKCk7XG4gICAgICBhcHAudG9nZ2xlQm94KCk7XG4gICAgfSxcbiAgICB0b2dnbGVCb3g6IGZ1bmN0aW9uIHRvZ2dsZUJveCgpIHtcbiAgICAgICQoJy52aWV3cG9ydCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnaW5hY3RpdmUnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgYXBwLmluaXQoKTsgLy9jMDI4XG4gIH0pO1xuXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgIGFwcC5zaXplcigpOyAvL2MwMjhcbiAgfSk7XG59KSh3aW5kb3cualF1ZXJ5KTsiXX0=
