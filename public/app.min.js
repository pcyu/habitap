"use strict";!function(e){var o={baseUrl:"http://localhost:3008",name:"",init:function(){o.doLogin(),o.getProtected(),o.logoutHandler(),o.signUpHandler()},doLogin:function(){e(document).on("click","#t-login",function(){e("#t-modal-message").removeClass("active"),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-login").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("click","#t-modal-login-button",function(){e("#t-modal-message").removeClass("active"),e("#t-modal-login").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("click","#t-modal-sign-up-button",function(){e("#t-modal-message").removeClass("active"),e("#t-modal-sign-up").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("submit","#login-submit",function(e){e.preventDefault(),o.loginHandler().then(o.loadEndpoint)})},getProtected:function(){e(document).on("submit","#get-protected",function(t){t.preventDefault();var n="Bearer "+localStorage.getItem("jwToken");return new Promise(function(t,a){e.ajax({headers:{accept:"application/json; odata=verbose",Authorization:n},type:"GET",url:o.baseUrl+"/protected",success:function(e){console.log(e),t()},error:function(e){console.log(e),a()}})})})},loadEndpoint:function(){var t="Bearer "+localStorage.getItem("jwToken");return new Promise(function(n,a){e.ajax({headers:{accept:"application/json; odata=verbose",Authorization:t},type:"GET",url:o.baseUrl+"/protected",success:function(e){o.loadPage("protected"),n()},error:function(e){console.log(e),a()}})})},loginHandler:function(){var t={username:e("#login-username").val(),password:e("#login-password").val()};return new Promise(function(n,a){e.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(t),headers:{accept:"application/json; odata=verbose"},type:"POST",url:"http://localhost:3008/auth/login",success:function(t){o.name=t.profile.firstName+" "+t.profile.lastName,e("#login-username").val(""),e("#login-password").val(""),localStorage.setItem("jwToken",t.profile.token),console.log("Welcome "+o.name+"! You are now logged in."),n()},error:function(o){console.log(o),e("#t-modal-login").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                <div id="t-modal-login-fail">Your login attempt has failed, please try again.</div>\n                <a id="t-modal-login-button">Login</a>\n                '),a()}})})},logoutHandler:function(){e(document).on("submit","#do-logout",function(e){e.preventDefault(),localStorage.removeItem("jwToken"),console.log("You are now logged out."),o.name="",location.reload(!0)})},signUpHandler:function(){e(document).on("click","#t-sign-up",function(){e("#t-modal-message").removeClass("active"),e("#t-modal-login").removeClass("active"),e("#t-modal-sign-up").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("submit","#sign-up-submit",function(t){t.preventDefault();var n={firstName:e("#firstName").val(),lastName:e("#lastName").val(),password:e("#password").val(),username:e("#username").val()};return new Promise(function(t,a){e.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(n),headers:{accept:"application/json; odata=verbose"},type:"POST",url:o.baseUrl+"/users/register",success:function(o){console.log("Thank you "+n.firstName+" "+n.lastName+"! Your account has been created."),e("#firstName").val(""),e("#lastName").val(""),e("#username").val(""),e("#password").val(""),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                  <div id="t-modal-sign-up-success">Thank you '+n.firstName+" "+n.lastName+'! Your account has been created.</div>\n                  <a id="t-modal-login-button">Login</a>\n                  '),t()},error:function(o){console.log(o),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                  <div id="t-modal-sign-up-fail">'+n.firstName+" "+n.lastName+', Either your password needs to be ten characters long, or your username has already been selected.</div>\n                  <a id="t-modal-sign-up-button">Sign-up</a>\n                  '),a()}})})})},loadPage:function(o){var t=e("#root"),n="src/templates/"+o+".html";e.get(n,function(o){e(t).html(o)})}};e(window).on("load",function(){o.init(),o.loadPage("landing")}),e(window).on("resize",function(){o.sizer()})}(window.jQuery),function(e){var o={box:function(){e("body").append('\n        <div class="viewport">\n          <span id="t-width"></span> x <span id="t-height"></span>\n        </div>\n      ')},calculateDimensions:function(){var o=window.innerWidth,t=window.innerHeight;e("#t-width").html(o),e("#t-height").html(t)},init:function(){o.box(),o.sizer()},sizer:function(){o.calculateDimensions(),o.toggleBox()},toggleBox:function(){e(".viewport").click(function(){e(this).toggleClass("inactive")})}};e(window).on("load",function(){o.init()}),e(window).on("resize",function(){o.sizer()})}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzaXplci5qcyJdLCJuYW1lcyI6WyIkIiwiYXBwIiwiYmFzZVVybCIsIm5hbWUiLCJpbml0IiwiZG9Mb2dpbiIsImdldFByb3RlY3RlZCIsImxvZ291dEhhbmRsZXIiLCJzaWduVXBIYW5kbGVyIiwiZG9jdW1lbnQiLCJvbiIsInJlbW92ZUNsYXNzIiwidG9nZ2xlQ2xhc3MiLCJwcm9wIiwiZSIsInByZXZlbnREZWZhdWx0IiwibG9naW5IYW5kbGVyIiwidGhlbiIsImxvYWRFbmRwb2ludCIsIl90b2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJQcm9taXNlIiwicmVzIiwicmVqIiwiYWpheCIsImhlYWRlcnMiLCJhY2NlcHQiLCJBdXRob3JpemF0aW9uIiwidHlwZSIsInVybCIsInN1Y2Nlc3MiLCJpdGVtIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiX2Vycm9yIiwibG9hZFBhZ2UiLCJfZXJyb3IyIiwiX2JvZHkiLCJ1c2VybmFtZSIsInZhbCIsInBhc3N3b3JkIiwiY29udGVudFR5cGUiLCJkYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsInByb2ZpbGUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInNldEl0ZW0iLCJ0b2tlbiIsIl9lcnJvcjMiLCJlbXB0eSIsImFkZENsYXNzIiwiYXBwZW5kIiwicmVtb3ZlSXRlbSIsImxvY2F0aW9uIiwicmVsb2FkIiwiYm9keSIsIl9lcnJvcjQiLCJwYWdlIiwidGFyZ2V0IiwiX3BhZ2UiLCJnZXQiLCJodG1sIiwid2luZG93Iiwic2l6ZXIiLCJqUXVlcnkiLCJib3giLCJjYWxjdWxhdGVEaW1lbnNpb25zIiwidyIsImlubmVyV2lkdGgiLCJoIiwiaW5uZXJIZWlnaHQiLCJ0b2dnbGVCb3giLCJjbGljayIsInRoaXMiXSwibWFwcGluZ3MiOiJBQUFBLGNBRUEsU0FBQUEsR0FFQSxJQUFBQyxHQUNBQyxRQUFBLHdCQUNBQyxLQUFBLEdBQ0FDLEtBQUEsV0FDQUgsRUFBQUksVUFDQUosRUFB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QSxTQUFBbkIsR0FDQTVDLEVBQUE4RCxHQUFBRyxLQUFBckIsT0FLQTVDLEVBQUFrRSxRQUFBeEQsR0FBQSxPQUFBLFdBQ0FULEVBQUFHLE9BQ0FILEVBQUFvQyxTQUFBLGFBR0FyQyxFQUFBa0UsUUFBQXhELEdBQUEsU0FBQSxXQUNBVCxFQUFBa0UsVUE5TEEsQ0FnTUFELE9BQUFFLFFDaE1BLFNBQUFwRSxHQUVBLElBQUFDLEdBQ0FvRSxJQUFBLFdBQ0FyRSxFQUFBLFFBQUF1RCxPQUFBLGlJQUVBZSxvQkFBQSxXQUNBLElBQUFDLEVBQUFMLE9BQUFNLFdBQ0FDLEVBQUFQLE9BQUFRLFlBQ0ExRSxFQUFBLFlBQUFpRSxLQUFBTSxHQUNBdkUsRUFBQSxhQUFBaUUsS0FBQVEsSUFFQXJFLEtBQUEsV0FDQUgsRUFBQW9FLE1BQ0FwRSxFQUFBa0UsU0FFQUEsTUFBQSxXQUNBbEUsRUFBQXFFLHNCQUNBckUsRUFBQTBFLGFBRUFBLFVBQUEsV0FDQTNFLEVBQUEsYUFBQTRFLE1BQUEsV0FDQTVFLEVBQUE2RSxNQUFBakUsWUFBQSxnQkFLQVosRUFBQWtFLFFBQUF4RCxHQUFBLE9BQUEsV0FDQVQsRUFBQUcsU0FHQUosRUFBQWtFLFFBQUF4RCxHQUFBLFNBQUEsV0FDQVQsRUFBQWtFLFVBaENBLENBa0NBRCxPQUFBRSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCQpIHtcblxuICB2YXIgYXBwID0ge1xuICAgIGJhc2VVcmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDgnLFxuICAgIG5hbWU6ICcnLFxuICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICBhcHAuZG9Mb2dpbigpO1xuICAgICAgYXBwLmdldFByb3RlY3RlZCgpO1xuICAgICAgYXBwLmxvZ291dEhhbmRsZXIoKTtcbiAgICAgIGFwcC5zaWduVXBIYW5kbGVyKCk7XG4gICAgfSxcbiAgICBkb0xvZ2luOiBmdW5jdGlvbiBkb0xvZ2luKCkge1xuICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0LWxvZ2luJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJChcIiN0LW1vZGFsLXNpZ24tdXBcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICQoXCIjdC1tb2RhbC1sb2dpblwiKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJCgnI3QtYnVyZ2VyJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgIH0pO1xuICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0LW1vZGFsLWxvZ2luLWJ1dHRvbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICQoXCIjdC1tb2RhbC1sb2dpblwiKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJCgnI3QtYnVyZ2VyJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgIH0pO1xuICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0LW1vZGFsLXNpZ24tdXAtYnV0dG9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJChcIiN0LW1vZGFsLXNpZ24tdXBcIikudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICQoJyN0LWJ1cmdlcicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCAnI2xvZ2luLXN1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYXBwLmxvZ2luSGFuZGxlcigpLnRoZW4oYXBwLmxvYWRFbmRwb2ludCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldFByb3RlY3RlZDogZnVuY3Rpb24gZ2V0UHJvdGVjdGVkKCkge1xuICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjZ2V0LXByb3RlY3RlZCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIF90b2tlbiA9ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd1Rva2VuJyk7XG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIC8vIGJlZm9yZVNlbmQ6IChyZXEpID0+IHsgcmVxLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIGFwcC50b2tlbikgfSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgXCJhY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBvZGF0YT12ZXJib3NlXCIsXG4gICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBfdG9rZW5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogYXBwLmJhc2VVcmwgKyAnL3Byb3RlY3RlZCcsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGl0ZW0pIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbSk7XG4gICAgICAgICAgICAgIHJlcygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coX2Vycm9yKTtcbiAgICAgICAgICAgICAgcmVqKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgbG9hZEVuZHBvaW50OiBmdW5jdGlvbiBsb2FkRW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3Rva2VuID0gJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3VG9rZW4nKTtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgLy8gYmVmb3JlU2VuZDogKHJlcSkgPT4geyByZXEuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIiwgYXBwLnRva2VuKSB9LFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiYWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvbjsgb2RhdGE9dmVyYm9zZVwiLFxuICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IF90b2tlblxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgdXJsOiBhcHAuYmFzZVVybCArICcvcHJvdGVjdGVkJyxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGl0ZW0pIHtcbiAgICAgICAgICAgIGFwcC5sb2FkUGFnZSgncHJvdGVjdGVkJyk7XG4gICAgICAgICAgICByZXMoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3IyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhfZXJyb3IyKTtcbiAgICAgICAgICAgIHJlaigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH0sXG4gICAgbG9naW5IYW5kbGVyOiBmdW5jdGlvbiBsb2dpbkhhbmRsZXIoKSB7XG4gICAgICB2YXIgX2JvZHkgPSB7XG4gICAgICAgIHVzZXJuYW1lOiAkKCcjbG9naW4tdXNlcm5hbWUnKS52YWwoKSxcbiAgICAgICAgcGFzc3dvcmQ6ICQoJyNsb2dpbi1wYXNzd29yZCcpLnZhbCgpXG4gICAgICB9O1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXG4gICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoX2JvZHkpLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiYWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvbjsgb2RhdGE9dmVyYm9zZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDA4L2F1dGgvbG9naW4nLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgYXBwLm5hbWUgPSBkYXRhLnByb2ZpbGUuZmlyc3ROYW1lICsgJyAnICsgZGF0YS5wcm9maWxlLmxhc3ROYW1lO1xuICAgICAgICAgICAgJCgnI2xvZ2luLXVzZXJuYW1lJykudmFsKCcnKTtcbiAgICAgICAgICAgICQoJyNsb2dpbi1wYXNzd29yZCcpLnZhbCgnJyk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnandUb2tlbicsIGRhdGEucHJvZmlsZS50b2tlbik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnV2VsY29tZSAnICsgYXBwLm5hbWUgKyAnISBZb3UgYXJlIG5vdyBsb2dnZWQgaW4uJyk7XG4gICAgICAgICAgICByZXMoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3IzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhfZXJyb3IzKTtcbiAgICAgICAgICAgICQoXCIjdC1tb2RhbC1sb2dpblwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmVtcHR5KCk7XG4gICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmFwcGVuZCgnXFxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJ0LW1vZGFsLWxvZ2luLWZhaWxcIj5Zb3VyIGxvZ2luIGF0dGVtcHQgaGFzIGZhaWxlZCwgcGxlYXNlIHRyeSBhZ2Fpbi48L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGEgaWQ9XCJ0LW1vZGFsLWxvZ2luLWJ1dHRvblwiPkxvZ2luPC9hPlxcbiAgICAgICAgICAgICAgICAnKTtcbiAgICAgICAgICAgIHJlaigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH0sXG4gICAgbG9nb3V0SGFuZGxlcjogZnVuY3Rpb24gbG9nb3V0SGFuZGxlcigpIHtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCAnI2RvLWxvZ291dCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2p3VG9rZW4nKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1lvdSBhcmUgbm93IGxvZ2dlZCBvdXQuJyk7XG4gICAgICAgIGFwcC5uYW1lID0gJyc7XG4gICAgICAgIGxvY2F0aW9uLnJlbG9hZCh0cnVlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgc2lnblVwSGFuZGxlcjogZnVuY3Rpb24gc2lnblVwSGFuZGxlcigpIHtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjdC1zaWduLXVwJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJChcIiN0LW1vZGFsLWxvZ2luXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKFwiI3QtbW9kYWwtc2lnbi11cFwiKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJCgnI3QtYnVyZ2VyJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgIH0pO1xuICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjc2lnbi11cC1zdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBib2R5ID0ge1xuICAgICAgICAgIGZpcnN0TmFtZTogJCgnI2ZpcnN0TmFtZScpLnZhbCgpLFxuICAgICAgICAgIGxhc3ROYW1lOiAkKCcjbGFzdE5hbWUnKS52YWwoKSxcbiAgICAgICAgICBwYXNzd29yZDogJCgnI3Bhc3N3b3JkJykudmFsKCksXG4gICAgICAgICAgdXNlcm5hbWU6ICQoJyN1c2VybmFtZScpLnZhbCgpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIixcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICBcImFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb247IG9kYXRhPXZlcmJvc2VcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogYXBwLmJhc2VVcmwgKyAnL3VzZXJzL3JlZ2lzdGVyJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVGhhbmsgeW91ICcgKyBib2R5LmZpcnN0TmFtZSArICcgJyArIGJvZHkubGFzdE5hbWUgKyAnISBZb3VyIGFjY291bnQgaGFzIGJlZW4gY3JlYXRlZC4nKTtcbiAgICAgICAgICAgICAgJCgnI2ZpcnN0TmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICQoJyNsYXN0TmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICQoJyN1c2VybmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICQoJyNwYXNzd29yZCcpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1zaWduLXVwXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5lbXB0eSgpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuYXBwZW5kKCdcXG4gICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwidC1tb2RhbC1zaWduLXVwLXN1Y2Nlc3NcIj5UaGFuayB5b3UgJyArIGJvZHkuZmlyc3ROYW1lICsgJyAnICsgYm9keS5sYXN0TmFtZSArICchIFlvdXIgYWNjb3VudCBoYXMgYmVlbiBjcmVhdGVkLjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgIDxhIGlkPVwidC1tb2RhbC1sb2dpbi1idXR0b25cIj5Mb2dpbjwvYT5cXG4gICAgICAgICAgICAgICAgICAnKTtcbiAgICAgICAgICAgICAgcmVzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKF9lcnJvcjQpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coX2Vycm9yNCk7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1zaWduLXVwXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5lbXB0eSgpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuYXBwZW5kKCdcXG4gICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwidC1tb2RhbC1zaWduLXVwLWZhaWxcIj4nICsgYm9keS5maXJzdE5hbWUgKyAnICcgKyBib2R5Lmxhc3ROYW1lICsgJywgRWl0aGVyIHlvdXIgcGFzc3dvcmQgbmVlZHMgdG8gYmUgdGVuIGNoYXJhY3RlcnMgbG9uZywgb3IgeW91ciB1c2VybmFtZSBoYXMgYWxyZWFkeSBiZWVuIHNlbGVjdGVkLjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgIDxhIGlkPVwidC1tb2RhbC1zaWduLXVwLWJ1dHRvblwiPlNpZ24tdXA8L2E+XFxuICAgICAgICAgICAgICAgICAgJyk7XG4gICAgICAgICAgICAgIHJlaigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGxvYWRQYWdlOiBmdW5jdGlvbiBsb2FkUGFnZShwYWdlKSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gJCgnI3Jvb3QnKTtcbiAgICAgIHZhciBfcGFnZSA9ICdzcmMvdGVtcGxhdGVzLycgKyBwYWdlICsgJy5odG1sJztcbiAgICAgIC8vICQodGFyZ2V0KS5odG1sKF9wYWdlKTtcbiAgICAgICQuZ2V0KF9wYWdlLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAkKHRhcmdldCkuaHRtbChkYXRhKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgYXBwLmluaXQoKTtcbiAgICBhcHAubG9hZFBhZ2UoXCJsYW5kaW5nXCIpO1xuICB9KTtcblxuICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICBhcHAuc2l6ZXIoKTsgLy9jMDA3XG4gIH0pO1xufSkod2luZG93LmpRdWVyeSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoJCkge1xuXG4gIHZhciBhcHAgPSB7XG4gICAgYm94OiBmdW5jdGlvbiBib3goKSB7XG4gICAgICAkKCdib2R5JykuYXBwZW5kKFwiXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ2aWV3cG9ydFxcXCI+XFxuICAgICAgICAgIDxzcGFuIGlkPVxcXCJ0LXdpZHRoXFxcIj48L3NwYW4+IHggPHNwYW4gaWQ9XFxcInQtaGVpZ2h0XFxcIj48L3NwYW4+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICBcIik7XG4gICAgfSxcbiAgICBjYWxjdWxhdGVEaW1lbnNpb25zOiBmdW5jdGlvbiBjYWxjdWxhdGVEaW1lbnNpb25zKCkge1xuICAgICAgdmFyIHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIHZhciBoID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgJChcIiN0LXdpZHRoXCIpLmh0bWwodyk7XG4gICAgICAkKFwiI3QtaGVpZ2h0XCIpLmh0bWwoaCk7XG4gICAgfSxcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgYXBwLmJveCgpO1xuICAgICAgYXBwLnNpemVyKCk7XG4gICAgfSxcbiAgICBzaXplcjogZnVuY3Rpb24gc2l6ZXIoKSB7XG4gICAgICBhcHAuY2FsY3VsYXRlRGltZW5zaW9ucygpO1xuICAgICAgYXBwLnRvZ2dsZUJveCgpO1xuICAgIH0sXG4gICAgdG9nZ2xlQm94OiBmdW5jdGlvbiB0b2dnbGVCb3goKSB7XG4gICAgICAkKCcudmlld3BvcnQnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2luYWN0aXZlJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgIGFwcC5pbml0KCk7IC8vYzAyOFxuICB9KTtcblxuICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICBhcHAuc2l6ZXIoKTsgLy9jMDI4XG4gIH0pO1xufSkod2luZG93LmpRdWVyeSk7Il19
