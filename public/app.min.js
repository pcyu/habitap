"use strict";!function(e){var o={baseUrl:"http://localhost:3008",name:"",init:function(){o.doLogin(),o.habitDashboard(),o.getUserPage(),o.logoutHandler(),o.signUpHandler()},doLogin:function(){e(document).on("click","#t-login",function(){e("#t-modal-message").removeClass("active"),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-login").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("click","#t-modal-login-button",function(){e("#t-modal-message").removeClass("active"),e("#t-modal-login").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("click","#t-modal-sign-up-button",function(){e("#t-modal-message").removeClass("active"),e("#t-modal-sign-up").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("submit","#login-submit",function(e){e.preventDefault(),o.loginHandler().then(o.loadEndpoint)})},habitDashboard:function(){e(document).on("click","#t-habit-entry",function(){o.loadPage("habit-form"),e("#t-burger").prop("checked",!1)})},getUserPage:function(){e(document).on("submit","#get-protected",function(a){a.preventDefault();var t="Bearer "+localStorage.getItem("jwToken");return new Promise(function(a,n){e.ajax({headers:{accept:"application/json; odata=verbose",Authorization:t},type:"GET",url:o.baseUrl+"/protected",success:function(e){console.log(e),a()},error:function(e){console.log(e),n()}})})})},loadEndpoint:function(){var a="Bearer "+localStorage.getItem("jwToken");return new Promise(function(t,n){e.ajax({headers:{accept:"application/json; odata=verbose",Authorization:a},type:"GET",url:o.baseUrl+"/habit",success:function(e){o.loadPage("habit"),t()},error:function(e){console.log(e),n()}})})},loginHandler:function(){var a={username:e("#login-username").val(),password:e("#login-password").val()};return new Promise(function(t,n){e.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(a),headers:{accept:"application/json; odata=verbose"},type:"POST",url:"http://localhost:3008/auth/login",success:function(a){o.name=a.profile.firstName+" "+a.profile.lastName,e("#login-username").val(""),e("#login-password").val(""),localStorage.setItem("jwToken",a.profile.token),console.log("Welcome "+o.name+"! You are now logged in."),t()},error:function(o){console.log(o),e("#t-modal-login").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                <div id="t-modal-login-fail">Your login attempt has failed, please try again.</div>\n                <a id="t-modal-login-button">Login</a>\n                '),n()}})})},logoutHandler:function(){e(document).on("click","#t-logout",function(e){e.preventDefault(),localStorage.removeItem("jwToken"),console.log("You are now logged out."),o.name="",location.reload(!0)})},signUpHandler:function(){e(document).on("click","#t-sign-up",function(){e("#t-modal-message").removeClass("active"),e("#t-modal-login").removeClass("active"),e("#t-modal-sign-up").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("submit","#sign-up-submit",function(a){a.preventDefault();var t={firstName:e("#firstName").val(),lastName:e("#lastName").val(),password:e("#password").val(),username:e("#username").val()};return new Promise(function(a,n){e.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(t),headers:{accept:"application/json; odata=verbose"},type:"POST",url:o.baseUrl+"/users/register",success:function(o){console.log("Thank you "+t.firstName+" "+t.lastName+"! Your account has been created."),e("#firstName").val(""),e("#lastName").val(""),e("#username").val(""),e("#password").val(""),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                  <div id="t-modal-sign-up-success">Thank you '+t.firstName+" "+t.lastName+'! Your account has been created.</div>\n                  <a id="t-modal-login-button">Login</a>\n                  '),a()},error:function(o){console.log(o),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                  <div id="t-modal-sign-up-fail">'+t.firstName+" "+t.lastName+', Either your password needs to be ten characters long, or your username has already been selected.</div>\n                  <a id="t-modal-sign-up-button">Sign-up</a>\n                  '),n()}})})})},loadPage:function(o){var a=e("#root"),t="src/templates/"+o+".html";e.get(t,function(o){e(a).html(o)})}};e(window).on("load",function(){o.init(),o.loadPage("landing")}),e(window).on("resize",function(){o.sizer()})}(window.jQuery),function(e){var o={box:function(){e("body").append('\n        <div class="viewport">\n          <span id="t-width"></span> x <span id="t-height"></span>\n        </div>\n      ')},calculateDimensions:function(){var o=window.innerWidth,a=window.innerHeight;e("#t-width").html(o),e("#t-height").html(a)},init:function(){o.box(),o.sizer()},sizer:function(){o.calculateDimensions(),o.toggleBox()},toggleBox:function(){e(".viewport").click(function(){e(this).toggleClass("inactive")})}};e(window).on("load",function(){o.init()}),e(window).on("resize",function(){o.sizer()})}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzaXplci5qcyJdLCJuYW1lcyI6WyIkIiwiYXBwIiwiYmFzZVVybCIsIm5hbWUiLCJpbml0IiwiZG9Mb2dpbiIsImhhYml0RGFzaGJvYXJkIiwiZ2V0VXNlclBhZ2UiLCJsb2dvdXRIYW5kbGVyIiwic2lnblVwSGFuZGxlciIsImRvY3VtZW50Iiwib24iLCJyZW1vdmVDbGFzcyIsInRvZ2dsZUNsYXNzIiwicHJvcCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImxvZ2luSGFuZGxlciIsInRoZW4iLCJsb2FkRW5kcG9pbnQiLCJsb2FkUGFnZSIsIl90b2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJQcm9taXNlIiwicmVzIiwicmVqIiwiYWpheCIsImhlYWRlcnMiLCJhY2NlcHQiLCJBdXRob3JpemF0aW9uIiwidHlwZSIsInVybCIsInN1Y2Nlc3MiLCJpdGVtIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiX2Vycm9yIiwiX2Vycm9yMiIsIl9ib2R5IiwidXNlcm5hbWUiLCJ2YWwiLCJwYXNzd29yZCIsImNvbnRlbnRUeXBlIiwiZGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9maWxlIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJzZXRJdGVtIiwidG9rZW4iLCJfZXJyb3IzIiwiZW1wdHkiLCJhZGRDbGFzcyIsImFwcGVuZCIsInJlbW92ZUl0ZW0iLCJsb2NhdGlvbiIsInJlbG9hZCIsImJvZHkiLCJfZXJyb3I0IiwicGFnZSIsInRhcmdldCIsIl9wYWdlIiwiZ2V0IiwiaHRtbCIsIndpbmRvdyIsInNpemVyIiwialF1ZXJ5IiwiYm94IiwiY2FsY3VsYXRlRGltZW5zaW9ucyIsInciLCJpbm5lcldpZHRoIiwiaCIsImlubmVySGVpZ2h0IiwidG9nZ2xlQm94IiwiY2xpY2siLCJ0aGlzIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUVBLFNBQUFBLEdBRUEsSUFBQUMsR0FDQUMsUUFBQSx3QkFDQUMsS0FBQSxHQUNBQyxLQUFBLFdBQ0FI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QVgsVUFBQSxJQUFBVyxFQUFBVixTQUFBLCtMQUNBeEIsWUFPQU4sU0FBQSxTQUFBMEMsR0FDQSxJQUFBQyxFQUFBL0QsRUFBQSxTQUNBZ0UsRUFBQSxpQkFBQUYsRUFBQSxRQUVBOUQsRUFBQWlFLElBQUFELEVBQUEsU0FBQW5CLEdBQ0E3QyxFQUFBK0QsR0FBQUcsS0FBQXJCLE9BS0E3QyxFQUFBbUUsUUFBQXhELEdBQUEsT0FBQSxXQUNBVixFQUFBRyxPQUNBSCxFQUFBbUIsU0FBQSxhQUdBcEIsRUFBQW1FLFFBQUF4RCxHQUFBLFNBQUEsV0FDQVYsRUFBQW1FLFVBeE1BLENBME1BRCxPQUFBRSxRQzFNQSxTQUFBckUsR0FFQSxJQUFBQyxHQUNBcUUsSUFBQSxXQUNBdEUsRUFBQSxRQUFBd0QsT0FBQSxpSUFFQWUsb0JBQUEsV0FDQSxJQUFBQyxFQUFBTCxPQUFBTSxXQUNBQyxFQUFBUCxPQUFBUSxZQUNBM0UsRUFBQSxZQUFBa0UsS0FBQU0sR0FDQXhFLEVBQUEsYUFBQWtFLEtBQUFRLElBRUF0RSxLQUFBLFdBQ0FILEVBQUFxRSxNQUNBckUsRUFBQW1FLFNBRUFBLE1BQUEsV0FDQW5FLEVBQUFzRSxzQkFDQXRFLEVBQUEyRSxhQUVBQSxVQUFBLFdBQ0E1RSxFQUFBLGFBQUE2RSxNQUFBLFdBQ0E3RSxFQUFBOEUsTUFBQWpFLFlBQUEsZ0JBS0FiLEVBQUFtRSxRQUFBeEQsR0FBQSxPQUFBLFdBQ0FWLEVBQUFHLFNBR0FKLEVBQUFtRSxRQUFBeEQsR0FBQSxTQUFBLFdBQ0FWLEVBQUFtRSxVQWhDQSxDQWtDQUQsT0FBQUUiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgdmFyIGFwcCA9IHtcbiAgICBiYXNlVXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDA4JyxcbiAgICBuYW1lOiAnJyxcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgYXBwLmRvTG9naW4oKTtcbiAgICAgIGFwcC5oYWJpdERhc2hib2FyZCgpO1xuICAgICAgYXBwLmdldFVzZXJQYWdlKCk7XG4gICAgICBhcHAubG9nb3V0SGFuZGxlcigpO1xuICAgICAgYXBwLnNpZ25VcEhhbmRsZXIoKTtcbiAgICB9LFxuICAgIGRvTG9naW46IGZ1bmN0aW9uIGRvTG9naW4oKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3QtbG9naW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKFwiI3QtbW9kYWwtc2lnbi11cFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJChcIiN0LW1vZGFsLWxvZ2luXCIpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKCcjdC1idXJnZXInKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgfSk7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3QtbW9kYWwtbG9naW4tYnV0dG9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJChcIiN0LW1vZGFsLWxvZ2luXCIpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKCcjdC1idXJnZXInKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgfSk7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3QtbW9kYWwtc2lnbi11cC1idXR0b24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKFwiI3QtbW9kYWwtc2lnbi11cFwiKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJCgnI3QtYnVyZ2VyJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgIH0pO1xuICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjbG9naW4tc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhcHAubG9naW5IYW5kbGVyKCkudGhlbihhcHAubG9hZEVuZHBvaW50KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFiaXREYXNoYm9hcmQ6IGZ1bmN0aW9uIGhhYml0RGFzaGJvYXJkKCkge1xuICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0LWhhYml0LWVudHJ5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBhcHAubG9hZFBhZ2UoXCJoYWJpdC1mb3JtXCIpO1xuICAgICAgICAkKCcjdC1idXJnZXInKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgfSk7XG4gICAgICAvLyAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3QtaGFiaXQtaGlzdG9yeScsICgpID0+IHtcbiAgICAgIC8vICAgJCgnI3QtYnVyZ2VyJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgIC8vIH0pO1xuICAgIH0sXG4gICAgZ2V0VXNlclBhZ2U6IGZ1bmN0aW9uIGdldFVzZXJQYWdlKCkge1xuICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjZ2V0LXByb3RlY3RlZCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIF90b2tlbiA9ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd1Rva2VuJyk7XG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIC8vIGJlZm9yZVNlbmQ6IChyZXEpID0+IHsgcmVxLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIGFwcC50b2tlbikgfSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgXCJhY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBvZGF0YT12ZXJib3NlXCIsXG4gICAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBfdG9rZW5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogYXBwLmJhc2VVcmwgKyAnL3Byb3RlY3RlZCcsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGl0ZW0pIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbSk7XG4gICAgICAgICAgICAgIHJlcygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coX2Vycm9yKTtcbiAgICAgICAgICAgICAgcmVqKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgbG9hZEVuZHBvaW50OiBmdW5jdGlvbiBsb2FkRW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3Rva2VuID0gJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3VG9rZW4nKTtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgLy8gYmVmb3JlU2VuZDogKHJlcSkgPT4geyByZXEuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIiwgYXBwLnRva2VuKSB9LFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiYWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvbjsgb2RhdGE9dmVyYm9zZVwiLFxuICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IF90b2tlblxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgdXJsOiBhcHAuYmFzZVVybCArICcvaGFiaXQnLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoaXRlbSkge1xuICAgICAgICAgICAgYXBwLmxvYWRQYWdlKCdoYWJpdCcpO1xuICAgICAgICAgICAgcmVzKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoX2Vycm9yMikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coX2Vycm9yMik7XG4gICAgICAgICAgICByZWooKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9LFxuICAgIGxvZ2luSGFuZGxlcjogZnVuY3Rpb24gbG9naW5IYW5kbGVyKCkge1xuICAgICAgdmFyIF9ib2R5ID0ge1xuICAgICAgICB1c2VybmFtZTogJCgnI2xvZ2luLXVzZXJuYW1lJykudmFsKCksXG4gICAgICAgIHBhc3N3b3JkOiAkKCcjbG9naW4tcGFzc3dvcmQnKS52YWwoKVxuICAgICAgfTtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLFxuICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KF9ib2R5KSxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcImFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb247IG9kYXRhPXZlcmJvc2VcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwOC9hdXRoL2xvZ2luJyxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcbiAgICAgICAgICAgIGFwcC5uYW1lID0gZGF0YS5wcm9maWxlLmZpcnN0TmFtZSArICcgJyArIGRhdGEucHJvZmlsZS5sYXN0TmFtZTtcbiAgICAgICAgICAgICQoJyNsb2dpbi11c2VybmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAkKCcjbG9naW4tcGFzc3dvcmQnKS52YWwoJycpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2p3VG9rZW4nLCBkYXRhLnByb2ZpbGUudG9rZW4pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1dlbGNvbWUgJyArIGFwcC5uYW1lICsgJyEgWW91IGFyZSBub3cgbG9nZ2VkIGluLicpO1xuICAgICAgICAgICAgcmVzKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoX2Vycm9yMykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coX2Vycm9yMyk7XG4gICAgICAgICAgICAkKFwiI3QtbW9kYWwtbG9naW5cIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5lbXB0eSgpO1xuICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5hcHBlbmQoJ1xcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPVwidC1tb2RhbC1sb2dpbi1mYWlsXCI+WW91ciBsb2dpbiBhdHRlbXB0IGhhcyBmYWlsZWQsIHBsZWFzZSB0cnkgYWdhaW4uPC9kaXY+XFxuICAgICAgICAgICAgICAgIDxhIGlkPVwidC1tb2RhbC1sb2dpbi1idXR0b25cIj5Mb2dpbjwvYT5cXG4gICAgICAgICAgICAgICAgJyk7XG4gICAgICAgICAgICByZWooKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9LFxuICAgIGxvZ291dEhhbmRsZXI6IGZ1bmN0aW9uIGxvZ291dEhhbmRsZXIoKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3QtbG9nb3V0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnandUb2tlbicpO1xuICAgICAgICBjb25zb2xlLmxvZygnWW91IGFyZSBub3cgbG9nZ2VkIG91dC4nKTtcbiAgICAgICAgYXBwLm5hbWUgPSAnJztcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBzaWduVXBIYW5kbGVyOiBmdW5jdGlvbiBzaWduVXBIYW5kbGVyKCkge1xuICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0LXNpZ24tdXAnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKFwiI3QtbW9kYWwtbG9naW5cIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICQoXCIjdC1tb2RhbC1zaWduLXVwXCIpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKCcjdC1idXJnZXInKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgfSk7XG4gICAgICAkKGRvY3VtZW50KS5vbignc3VibWl0JywgJyNzaWduLXVwLXN1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGJvZHkgPSB7XG4gICAgICAgICAgZmlyc3ROYW1lOiAkKCcjZmlyc3ROYW1lJykudmFsKCksXG4gICAgICAgICAgbGFzdE5hbWU6ICQoJyNsYXN0TmFtZScpLnZhbCgpLFxuICAgICAgICAgIHBhc3N3b3JkOiAkKCcjcGFzc3dvcmQnKS52YWwoKSxcbiAgICAgICAgICB1c2VybmFtZTogJCgnI3VzZXJuYW1lJykudmFsKClcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHtcbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoYm9keSksXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgIFwiYWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvbjsgb2RhdGE9dmVyYm9zZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiBhcHAuYmFzZVVybCArICcvdXNlcnMvcmVnaXN0ZXInLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUaGFuayB5b3UgJyArIGJvZHkuZmlyc3ROYW1lICsgJyAnICsgYm9keS5sYXN0TmFtZSArICchIFlvdXIgYWNjb3VudCBoYXMgYmVlbiBjcmVhdGVkLicpO1xuICAgICAgICAgICAgICAkKCcjZmlyc3ROYW1lJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgJCgnI2xhc3ROYW1lJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgJCgnI3VzZXJuYW1lJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgJCgnI3Bhc3N3b3JkJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLXNpZ24tdXBcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmVtcHR5KCk7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5hcHBlbmQoJ1xcbiAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJ0LW1vZGFsLXNpZ24tdXAtc3VjY2Vzc1wiPlRoYW5rIHlvdSAnICsgYm9keS5maXJzdE5hbWUgKyAnICcgKyBib2R5Lmxhc3ROYW1lICsgJyEgWW91ciBhY2NvdW50IGhhcyBiZWVuIGNyZWF0ZWQuPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgPGEgaWQ9XCJ0LW1vZGFsLWxvZ2luLWJ1dHRvblwiPkxvZ2luPC9hPlxcbiAgICAgICAgICAgICAgICAgICcpO1xuICAgICAgICAgICAgICByZXMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoX2Vycm9yNCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfZXJyb3I0KTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLXNpZ24tdXBcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmVtcHR5KCk7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5hcHBlbmQoJ1xcbiAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJ0LW1vZGFsLXNpZ24tdXAtZmFpbFwiPicgKyBib2R5LmZpcnN0TmFtZSArICcgJyArIGJvZHkubGFzdE5hbWUgKyAnLCBFaXRoZXIgeW91ciBwYXNzd29yZCBuZWVkcyB0byBiZSB0ZW4gY2hhcmFjdGVycyBsb25nLCBvciB5b3VyIHVzZXJuYW1lIGhhcyBhbHJlYWR5IGJlZW4gc2VsZWN0ZWQuPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgPGEgaWQ9XCJ0LW1vZGFsLXNpZ24tdXAtYnV0dG9uXCI+U2lnbi11cDwvYT5cXG4gICAgICAgICAgICAgICAgICAnKTtcbiAgICAgICAgICAgICAgcmVqKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgbG9hZFBhZ2U6IGZ1bmN0aW9uIGxvYWRQYWdlKHBhZ2UpIHtcbiAgICAgIHZhciB0YXJnZXQgPSAkKCcjcm9vdCcpO1xuICAgICAgdmFyIF9wYWdlID0gJ3NyYy90ZW1wbGF0ZXMvJyArIHBhZ2UgKyAnLmh0bWwnO1xuICAgICAgLy8gJCh0YXJnZXQpLmh0bWwoX3BhZ2UpO1xuICAgICAgJC5nZXQoX3BhZ2UsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICQodGFyZ2V0KS5odG1sKGRhdGEpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBhcHAuaW5pdCgpO1xuICAgIGFwcC5sb2FkUGFnZShcImxhbmRpbmdcIik7XG4gIH0pO1xuXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgIGFwcC5zaXplcigpOyAvL2MwMDdcbiAgfSk7XG59KSh3aW5kb3cualF1ZXJ5KTsiLCJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgdmFyIGFwcCA9IHtcbiAgICBib3g6IGZ1bmN0aW9uIGJveCgpIHtcbiAgICAgICQoJ2JvZHknKS5hcHBlbmQoXCJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInZpZXdwb3J0XFxcIj5cXG4gICAgICAgICAgPHNwYW4gaWQ9XFxcInQtd2lkdGhcXFwiPjwvc3Bhbj4geCA8c3BhbiBpZD1cXFwidC1oZWlnaHRcXFwiPjwvc3Bhbj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIFwiKTtcbiAgICB9LFxuICAgIGNhbGN1bGF0ZURpbWVuc2lvbnM6IGZ1bmN0aW9uIGNhbGN1bGF0ZURpbWVuc2lvbnMoKSB7XG4gICAgICB2YXIgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgdmFyIGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAkKFwiI3Qtd2lkdGhcIikuaHRtbCh3KTtcbiAgICAgICQoXCIjdC1oZWlnaHRcIikuaHRtbChoKTtcbiAgICB9LFxuICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICBhcHAuYm94KCk7XG4gICAgICBhcHAuc2l6ZXIoKTtcbiAgICB9LFxuICAgIHNpemVyOiBmdW5jdGlvbiBzaXplcigpIHtcbiAgICAgIGFwcC5jYWxjdWxhdGVEaW1lbnNpb25zKCk7XG4gICAgICBhcHAudG9nZ2xlQm94KCk7XG4gICAgfSxcbiAgICB0b2dnbGVCb3g6IGZ1bmN0aW9uIHRvZ2dsZUJveCgpIHtcbiAgICAgICQoJy52aWV3cG9ydCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnaW5hY3RpdmUnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgYXBwLmluaXQoKTsgLy9jMDI4XG4gIH0pO1xuXG4gICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xuICAgIGFwcC5zaXplcigpOyAvL2MwMjhcbiAgfSk7XG59KSh3aW5kb3cualF1ZXJ5KTsiXX0=
