"use strict";!function(e){var a={baseUrl:"http://localhost:3008",init:function(){a.habitDashboard(),a.getUserPage(),a.loginExec(),a.loginModal(),a.logoutHandler(),a.signUpHandler()},habitDashboard:function(){e(document).on("click","#t-habit-entry",function(){a.loadPage("habit-form"),e("#t-burger").prop("checked",!1)})},getUserPage:function(){e(document).on("submit","#get-protected",function(o){o.preventDefault();var n="Bearer "+localStorage.getItem("jwToken");return new Promise(function(o,t){e.ajax({headers:{accept:"application/json; odata=verbose",Authorization:n},type:"GET",url:a.baseUrl+"/protected",success:function(e){console.log(e),o()},error:function(e){console.log(e),t()}})})})},loadPage:function(a){var o=e("#root"),n="src/views/"+a+".html";e.get(n,function(a){e(o).html(a)})},loadProfile:function(o){var n="Bearer "+localStorage.getItem("jwToken");e.ajax({headers:{accept:"application/json; odata=verbose",Authorization:n},type:"GET",url:a.baseUrl+"/users/"+o,success:function(o){window.location.href=a.baseUrl+"/users/profile",e("#welcome").html("<span class='red'>Hello <b>Again</b></span>")},error:function(e){console.log(e)}})},loginExec:function(){e(document).on("submit","#login-submit",function(e){e.preventDefault(),a.loginHandler()})},loginHandler:function(){var o={username:e("#login-username").val(),password:e("#login-password").val()};e.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(o),headers:{accept:"application/json; odata=verbose"},type:"POST",url:"http://localhost:3008/auth/login",success:function(n){a.profile.name=n.profile.firstName+" "+n.profile.lastName,e("#login-username").val(""),e("#login-password").val(""),localStorage.setItem("jwToken",n.profile.token),a.loadProfile(o.username)},error:function(a){console.log(a),e("#t-modal-login").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                <div id="t-modal-login-fail">Your login attempt has failed, please try again.</div>\n                <a id="t-modal-login-button">Login</a>\n                ')}})},loginModal:function(){e(document).on("click","#t-login",function(a){a.preventDefault(),e(".y-modal.signup").hasClass("active")?(e(".y-modal.signup").removeClass("active"),e(".y-modal.login").addClass("active")):e(".y-modal.login").toggleClass("active"),e("#t-burger").prop("checked",!1)})},logoutHandler:function(){e(document).on("click","#t-logout",function(e){e.preventDefault(),localStorage.removeItem("jwToken"),console.log("You are now logged out."),a.profile.name="",location.reload(!0)})},profile:{name:""},signUpHandler:function(){e(document).on("click","#t-sign-up",function(){e(".y-modal.login").hasClass("active")?(e(".y-modal.login").removeClass("active"),e(".y-modal.signup").addClass("active")):e(".y-modal.signup").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("submit","#sign-up-submit",function(o){o.preventDefault();var n={firstName:e("#firstName").val(),lastName:e("#lastName").val(),password:e("#password").val(),username:e("#username").val()};return new Promise(function(o,t){e.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(n),headers:{accept:"application/json; odata=verbose"},type:"POST",url:a.baseUrl+"/users/register",success:function(a){console.log("Thank you "+n.firstName+" "+n.lastName+"! Your account has been created."),e("#firstName").val(""),e("#lastName").val(""),e("#username").val(""),e("#password").val(""),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                  <div id="t-modal-sign-up-success">Thank you '+n.firstName+" "+n.lastName+'! Your account has been created.</div>\n                  <a id="t-modal-login-button">Login</a>\n                  '),o()},error:function(a){console.log(a),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                  <div id="t-modal-sign-up-fail">'+n.firstName+" "+n.lastName+', Either your password needs to be ten characters long, or your username has already been selected.</div>\n                  <a id="t-modal-sign-up-button">Sign-up</a>\n                  '),t()}})})})}};e(window).on("load",function(){a.init()})}(window.jQuery),function(e){var a={box:function(){e("body").append('\n        <div class="viewport">\n          <span id="t-width"></span> x <span id="t-height"></span>\n        </div>\n      ')},calculateDimensions:function(){var a=window.innerWidth,o=window.innerHeight;e("#t-width").html(a),e("#t-height").html(o)},init:function(){a.box(),a.sizer()},sizer:function(){a.calculateDimensions(),a.toggleBox()},toggleBox:function(){e(".viewport").click(function(){e(this).toggleClass("inactive")})}};e(window).on("load",function(){a.init()}),e(window).on("resize",function(){a.sizer()})}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzaXplci5qcyJdLCJuYW1lcyI6WyIkIiwiYXBwIiwiYmFzZVVybCIsImluaXQiLCJoYWJpdERhc2hib2FyZCIsImdldFVzZXJQYWdlIiwibG9naW5FeGVjIiwibG9naW5Nb2RhbCIsImxvZ291dEhhbmRsZXIiLCJzaWduVXBIYW5kbGVyIiwiZG9jdW1lbnQiLCJvbiIsImxvYWRQYWdlIiwicHJvcCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIl90b2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJQcm9taXNlIiwicmVzIiwicmVqIiwiYWpheCIsImhlYWRlcnMiLCJhY2NlcHQiLCJBdXRob3JpemF0aW9uIiwidHlwZSIsInVybCIsInN1Y2Nlc3MiLCJpdGVtIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiX2Vycm9yIiwicGFnZSIsInRhcmdldCIsIl9wYWdlIiwiZ2V0IiwiZGF0YSIsImh0bWwiLCJsb2FkUHJvZmlsZSIsInVzZXJuYW1lIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiX2Vycm9yMiIsImxvZ2luSGFuZGxlciIsIl9ib2R5IiwidmFsIiwicGFzc3dvcmQiLCJjb250ZW50VHlwZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9maWxlIiwibmFtZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwic2V0SXRlbSIsInRva2VuIiwiX2Vycm9yMyIsInJlbW92ZUNsYXNzIiwiZW1wdHkiLCJhZGRDbGFzcyIsImFwcGVuZCIsImhhc0NsYXNzIiwidG9nZ2xlQ2xhc3MiLCJyZW1vdmVJdGVtIiwicmVsb2FkIiwiYm9keSIsIl9lcnJvcjQiLCJqUXVlcnkiLCJib3giLCJjYWxjdWxhdGVEaW1lbnNpb25zIiwidyIsImlubmVyV2lkdGgiLCJoIiwiaW5uZXJIZWlnaHQiLCJzaXplciIsInRvZ2dsZUJveCIsImNsaWNrIiwidGhpcyJdLCJtYXBwaW5ncyI6IkFBQUEsY0FFQSxTQUFBQSxHQUVBLElBQUFDLEdBQ0FDLFFBQUEsd0JB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QUFBYSxFQUFBWixTQUFBLCtMQUNBbkMsYUFTQXJCLEVBQUEwQyxRQUFBL0IsR0FBQSxPQUFBLFdBQ0FWLEVBQUFFLFNBdk1BLENBeU1BdUMsT0FBQTRCLFFDek1BLFNBQUF0RSxHQUVBLElBQUFDLEdBQ0FzRSxJQUFBLFdBQ0F2RSxFQUFBLFFBQUErRCxPQUFBLGlJQUVBUyxvQkFBQSxXQUNBLElBQUFDLEVBQUEvQixPQUFBZ0MsV0FDQUMsRUFBQWpDLE9BQUFrQyxZQUNBNUUsRUFBQSxZQUFBdUMsS0FBQWtDLEdBQ0F6RSxFQUFBLGFBQUF1QyxLQUFBb0MsSUFFQXhFLEtBQUEsV0FDQUYsRUFBQXNFLE1BQ0F0RSxFQUFBNEUsU0FFQUEsTUFBQSxXQUNBNUUsRUFBQXVFLHNCQUNBdkUsRUFBQTZFLGFBRUFBLFVBQUEsV0FDQTlFLEVBQUEsYUFBQStFLE1BQUEsV0FDQS9FLEVBQUFnRixNQUFBZixZQUFBLGdCQUtBakUsRUFBQTBDLFFBQUEvQixHQUFBLE9BQUEsV0FDQVYsRUFBQUUsU0FHQUgsRUFBQTBDLFFBQUEvQixHQUFBLFNBQUEsV0FDQVYsRUFBQTRFLFVBaENBLENBa0NBbkMsT0FBQTRCIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoJCkge1xuXG4gIHZhciBhcHAgPSB7XG4gICAgYmFzZVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwOCcsXG4gICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIGFwcC5oYWJpdERhc2hib2FyZCgpO1xuICAgICAgYXBwLmdldFVzZXJQYWdlKCk7XG4gICAgICBhcHAubG9naW5FeGVjKCk7XG4gICAgICBhcHAubG9naW5Nb2RhbCgpO1xuICAgICAgYXBwLmxvZ291dEhhbmRsZXIoKTtcbiAgICAgIGFwcC5zaWduVXBIYW5kbGVyKCk7XG4gICAgfSxcbiAgICBoYWJpdERhc2hib2FyZDogZnVuY3Rpb24gaGFiaXREYXNoYm9hcmQoKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3QtaGFiaXQtZW50cnknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFwcC5sb2FkUGFnZShcImhhYml0LWZvcm1cIik7XG4gICAgICAgICQoJyN0LWJ1cmdlcicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgICAgIC8vICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjdC1oYWJpdC1oaXN0b3J5JywgKCkgPT4ge1xuICAgICAgLy8gICAkKCcjdC1idXJnZXInKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgLy8gfSk7XG4gICAgfSxcbiAgICBnZXRVc2VyUGFnZTogZnVuY3Rpb24gZ2V0VXNlclBhZ2UoKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignc3VibWl0JywgJyNnZXQtcHJvdGVjdGVkJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgX3Rva2VuID0gJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3VG9rZW4nKTtcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHtcbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgLy8gYmVmb3JlU2VuZDogKHJlcSkgPT4geyByZXEuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIiwgYXBwLnRva2VuKSB9LFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICBcImFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb247IG9kYXRhPXZlcmJvc2VcIixcbiAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IF90b2tlblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiBhcHAuYmFzZVVybCArICcvcHJvdGVjdGVkJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoaXRlbSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKTtcbiAgICAgICAgICAgICAgcmVzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKF9lcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfZXJyb3IpO1xuICAgICAgICAgICAgICByZWooKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBsb2FkUGFnZTogZnVuY3Rpb24gbG9hZFBhZ2UocGFnZSkge1xuICAgICAgdmFyIHRhcmdldCA9ICQoJyNyb290Jyk7XG4gICAgICB2YXIgX3BhZ2UgPSAnc3JjL3ZpZXdzLycgKyBwYWdlICsgJy5odG1sJztcbiAgICAgICQuZ2V0KF9wYWdlLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAkKHRhcmdldCkuaHRtbChkYXRhKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgbG9hZFByb2ZpbGU6IGZ1bmN0aW9uIGxvYWRQcm9maWxlKHVzZXJuYW1lKSB7XG4gICAgICB2YXIgX3Rva2VuID0gJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3VG9rZW4nKTtcbiAgICAgIC8vICAgICAgICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgJC5hamF4KHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiYWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvbjsgb2RhdGE9dmVyYm9zZVwiLFxuICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBfdG9rZW5cbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgIHVybDogYXBwLmJhc2VVcmwgKyAnL3VzZXJzLycgKyB1c2VybmFtZSxcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhpdGVtKSB7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBhcHAuYmFzZVVybCArICcvdXNlcnMvcHJvZmlsZSc7XG5cbiAgICAgICAgICAkKCcjd2VsY29tZScpLmh0bWwoXCI8c3BhbiBjbGFzcz0ncmVkJz5IZWxsbyA8Yj5BZ2FpbjwvYj48L3NwYW4+XCIpO1xuXG4gICAgICAgICAgLy8gICAgICAgICAgICAgIHJlcygpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoX2Vycm9yMikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKF9lcnJvcjIpO1xuICAgICAgICAgIC8vICAgICAgICAgICAgICByZWooKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyAgICAgICAgfSk7XG4gICAgICAvLyAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfSxcbiAgICBsb2dpbkV4ZWM6IGZ1bmN0aW9uIGxvZ2luRXhlYygpIHtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCAnI2xvZ2luLXN1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYXBwLmxvZ2luSGFuZGxlcigpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBsb2dpbkhhbmRsZXI6IGZ1bmN0aW9uIGxvZ2luSGFuZGxlcigpIHtcbiAgICAgIHZhciBfYm9keSA9IHtcbiAgICAgICAgdXNlcm5hbWU6ICQoJyNsb2dpbi11c2VybmFtZScpLnZhbCgpLFxuICAgICAgICBwYXNzd29yZDogJCgnI2xvZ2luLXBhc3N3b3JkJykudmFsKClcbiAgICAgIH07XG4gICAgICAvLyAgICAgICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcbiAgICAgICQuYWpheCh7XG4gICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIixcbiAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoX2JvZHkpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJhY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBvZGF0YT12ZXJib3NlXCJcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjMwMDgvYXV0aC9sb2dpbicsXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgIGFwcC5wcm9maWxlLm5hbWUgPSBkYXRhLnByb2ZpbGUuZmlyc3ROYW1lICsgJyAnICsgZGF0YS5wcm9maWxlLmxhc3ROYW1lO1xuICAgICAgICAgICQoJyNsb2dpbi11c2VybmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgJCgnI2xvZ2luLXBhc3N3b3JkJykudmFsKCcnKTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnandUb2tlbicsIGRhdGEucHJvZmlsZS50b2tlbik7XG4gICAgICAgICAgYXBwLmxvYWRQcm9maWxlKF9ib2R5LnVzZXJuYW1lKTtcbiAgICAgICAgICAvLyAgICAgICAgICAgICAgcmVzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3IzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coX2Vycm9yMyk7XG4gICAgICAgICAgJChcIiN0LW1vZGFsLWxvZ2luXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmVtcHR5KCk7XG4gICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuYXBwZW5kKCdcXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cInQtbW9kYWwtbG9naW4tZmFpbFwiPllvdXIgbG9naW4gYXR0ZW1wdCBoYXMgZmFpbGVkLCBwbGVhc2UgdHJ5IGFnYWluLjwvZGl2PlxcbiAgICAgICAgICAgICAgICA8YSBpZD1cInQtbW9kYWwtbG9naW4tYnV0dG9uXCI+TG9naW48L2E+XFxuICAgICAgICAgICAgICAgICcpO1xuICAgICAgICAgIC8vICAgICAgICAgICAgICByZWooKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyAgICAgICAgfSk7XG4gICAgICAvLyAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfSxcbiAgICBsb2dpbk1vZGFsOiBmdW5jdGlvbiBsb2dpbk1vZGFsKCkge1xuICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0LWxvZ2luJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoJCgnLnktbW9kYWwuc2lnbnVwJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgJCgnLnktbW9kYWwuc2lnbnVwJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICQoJy55LW1vZGFsLmxvZ2luJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoJy55LW1vZGFsLmxvZ2luJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgICQoJyN0LWJ1cmdlcicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGxvZ291dEhhbmRsZXI6IGZ1bmN0aW9uIGxvZ291dEhhbmRsZXIoKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3QtbG9nb3V0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnandUb2tlbicpO1xuICAgICAgICBjb25zb2xlLmxvZygnWW91IGFyZSBub3cgbG9nZ2VkIG91dC4nKTtcbiAgICAgICAgYXBwLnByb2ZpbGUubmFtZSA9ICcnO1xuICAgICAgICBsb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHByb2ZpbGU6IHtcbiAgICAgIG5hbWU6ICcnXG4gICAgfSxcbiAgICBzaWduVXBIYW5kbGVyOiBmdW5jdGlvbiBzaWduVXBIYW5kbGVyKCkge1xuICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0LXNpZ24tdXAnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICBpZiAoJCgnLnktbW9kYWwubG9naW4nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAkKCcueS1tb2RhbC5sb2dpbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAkKCcueS1tb2RhbC5zaWdudXAnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJCgnLnktbW9kYWwuc2lnbnVwJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgICQoJyN0LWJ1cmdlcicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCAnI3NpZ24tdXAtc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgYm9keSA9IHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICQoJyNmaXJzdE5hbWUnKS52YWwoKSxcbiAgICAgICAgICBsYXN0TmFtZTogJCgnI2xhc3ROYW1lJykudmFsKCksXG4gICAgICAgICAgcGFzc3dvcmQ6ICQoJyNwYXNzd29yZCcpLnZhbCgpLFxuICAgICAgICAgIHVzZXJuYW1lOiAkKCcjdXNlcm5hbWUnKS52YWwoKVxuICAgICAgICB9O1xuICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikge1xuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgXCJhY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBvZGF0YT12ZXJib3NlXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IGFwcC5iYXNlVXJsICsgJy91c2Vycy9yZWdpc3RlcicsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1RoYW5rIHlvdSAnICsgYm9keS5maXJzdE5hbWUgKyAnICcgKyBib2R5Lmxhc3ROYW1lICsgJyEgWW91ciBhY2NvdW50IGhhcyBiZWVuIGNyZWF0ZWQuJyk7XG4gICAgICAgICAgICAgICQoJyNmaXJzdE5hbWUnKS52YWwoJycpO1xuICAgICAgICAgICAgICAkKCcjbGFzdE5hbWUnKS52YWwoJycpO1xuICAgICAgICAgICAgICAkKCcjdXNlcm5hbWUnKS52YWwoJycpO1xuICAgICAgICAgICAgICAkKCcjcGFzc3dvcmQnKS52YWwoJycpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtc2lnbi11cFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuZW1wdHkoKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmFwcGVuZCgnXFxuICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cInQtbW9kYWwtc2lnbi11cC1zdWNjZXNzXCI+VGhhbmsgeW91ICcgKyBib2R5LmZpcnN0TmFtZSArICcgJyArIGJvZHkubGFzdE5hbWUgKyAnISBZb3VyIGFjY291bnQgaGFzIGJlZW4gY3JlYXRlZC48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICA8YSBpZD1cInQtbW9kYWwtbG9naW4tYnV0dG9uXCI+TG9naW48L2E+XFxuICAgICAgICAgICAgICAgICAgJyk7XG4gICAgICAgICAgICAgIHJlcygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3I0KSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9lcnJvcjQpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtc2lnbi11cFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuZW1wdHkoKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmFwcGVuZCgnXFxuICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cInQtbW9kYWwtc2lnbi11cC1mYWlsXCI+JyArIGJvZHkuZmlyc3ROYW1lICsgJyAnICsgYm9keS5sYXN0TmFtZSArICcsIEVpdGhlciB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIHRlbiBjaGFyYWN0ZXJzIGxvbmcsIG9yIHlvdXIgdXNlcm5hbWUgaGFzIGFscmVhZHkgYmVlbiBzZWxlY3RlZC48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICA8YSBpZD1cInQtbW9kYWwtc2lnbi11cC1idXR0b25cIj5TaWduLXVwPC9hPlxcbiAgICAgICAgICAgICAgICAgICcpO1xuICAgICAgICAgICAgICByZWooKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBhcHAuaW5pdCgpO1xuICB9KTtcbn0pKHdpbmRvdy5qUXVlcnkpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCQpIHtcblxuICB2YXIgYXBwID0ge1xuICAgIGJveDogZnVuY3Rpb24gYm94KCkge1xuICAgICAgJCgnYm9keScpLmFwcGVuZChcIlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwidmlld3BvcnRcXFwiPlxcbiAgICAgICAgICA8c3BhbiBpZD1cXFwidC13aWR0aFxcXCI+PC9zcGFuPiB4IDxzcGFuIGlkPVxcXCJ0LWhlaWdodFxcXCI+PC9zcGFuPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgXCIpO1xuICAgIH0sXG4gICAgY2FsY3VsYXRlRGltZW5zaW9uczogZnVuY3Rpb24gY2FsY3VsYXRlRGltZW5zaW9ucygpIHtcbiAgICAgIHZhciB3ID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICB2YXIgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICQoXCIjdC13aWR0aFwiKS5odG1sKHcpO1xuICAgICAgJChcIiN0LWhlaWdodFwiKS5odG1sKGgpO1xuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIGFwcC5ib3goKTtcbiAgICAgIGFwcC5zaXplcigpO1xuICAgIH0sXG4gICAgc2l6ZXI6IGZ1bmN0aW9uIHNpemVyKCkge1xuICAgICAgYXBwLmNhbGN1bGF0ZURpbWVuc2lvbnMoKTtcbiAgICAgIGFwcC50b2dnbGVCb3goKTtcbiAgICB9LFxuICAgIHRvZ2dsZUJveDogZnVuY3Rpb24gdG9nZ2xlQm94KCkge1xuICAgICAgJCgnLnZpZXdwb3J0JykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdpbmFjdGl2ZScpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBhcHAuaW5pdCgpOyAvL2MwMjhcbiAgfSk7XG5cbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgYXBwLnNpemVyKCk7IC8vYzAyOFxuICB9KTtcbn0pKHdpbmRvdy5qUXVlcnkpOyJdfQ==
