"use strict";!function(e){var o={baseUrl:"http://localhost:3008",name:"",init:function(){o.doLogin(),o.habitDashboard(),o.getUserPage(),o.logoutHandler(),o.signUpHandler()},doLogin:function(){e(document).on("click","#t-login",function(){e("#t-modal-message").removeClass("active"),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-login").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("click","#t-modal-login-button",function(){e("#t-modal-message").removeClass("active"),e("#t-modal-login").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("click","#t-modal-sign-up-button",function(){e("#t-modal-message").removeClass("active"),e("#t-modal-sign-up").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("submit","#login-submit",function(e){e.preventDefault(),o.loginHandler().then(o.loadEndpoint)})},habitDashboard:function(){e(document).on("click","#t-habit-entry",function(){e("#t-burger").prop("checked",!1)}),e(document).on("click","#t-habit-history",function(){e("#t-burger").prop("checked",!1)})},getUserPage:function(){e(document).on("submit","#get-protected",function(t){t.preventDefault();var n="Bearer "+localStorage.getItem("jwToken");return new Promise(function(t,a){e.ajax({headers:{accept:"application/json; odata=verbose",Authorization:n},type:"GET",url:o.baseUrl+"/protected",success:function(e){console.log(e),t()},error:function(e){console.log(e),a()}})})})},loadEndpoint:function(){var t="Bearer "+localStorage.getItem("jwToken");return new Promise(function(n,a){e.ajax({headers:{accept:"application/json; odata=verbose",Authorization:t},type:"GET",url:o.baseUrl+"/habit",success:function(e){o.loadPage("habit"),n()},error:function(e){console.log(e),a()}})})},loginHandler:function(){var t={username:e("#login-username").val(),password:e("#login-password").val()};return new Promise(function(n,a){e.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(t),headers:{accept:"application/json; odata=verbose"},type:"POST",url:"http://localhost:3008/auth/login",success:function(t){o.name=t.profile.firstName+" "+t.profile.lastName,e("#login-username").val(""),e("#login-password").val(""),localStorage.setItem("jwToken",t.profile.token),console.log("Welcome "+o.name+"! You are now logged in."),n()},error:function(o){console.log(o),e("#t-modal-login").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                <div id="t-modal-login-fail">Your login attempt has failed, please try again.</div>\n                <a id="t-modal-login-button">Login</a>\n                '),a()}})})},logoutHandler:function(){e(document).on("click","#t-logout",function(e){e.preventDefault(),localStorage.removeItem("jwToken"),console.log("You are now logged out."),o.name="",location.reload(!0)})},signUpHandler:function(){e(document).on("click","#t-sign-up",function(){e("#t-modal-message").removeClass("active"),e("#t-modal-login").removeClass("active"),e("#t-modal-sign-up").toggleClass("active"),e("#t-burger").prop("checked",!1)}),e(document).on("submit","#sign-up-submit",function(t){t.preventDefault();var n={firstName:e("#firstName").val(),lastName:e("#lastName").val(),password:e("#password").val(),username:e("#username").val()};return new Promise(function(t,a){e.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(n),headers:{accept:"application/json; odata=verbose"},type:"POST",url:o.baseUrl+"/users/register",success:function(o){console.log("Thank you "+n.firstName+" "+n.lastName+"! Your account has been created."),e("#firstName").val(""),e("#lastName").val(""),e("#username").val(""),e("#password").val(""),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                  <div id="t-modal-sign-up-success">Thank you '+n.firstName+" "+n.lastName+'! Your account has been created.</div>\n                  <a id="t-modal-login-button">Login</a>\n                  '),t()},error:function(o){console.log(o),e("#t-modal-sign-up").removeClass("active"),e("#t-modal-message").empty(),e("#t-modal-message").addClass("active"),e("#t-modal-message").append('\n                  <div id="t-modal-sign-up-fail">'+n.firstName+" "+n.lastName+', Either your password needs to be ten characters long, or your username has already been selected.</div>\n                  <a id="t-modal-sign-up-button">Sign-up</a>\n                  '),a()}})})})},loadPage:function(o){var t=e("#root"),n="src/templates/"+o+".html";e.get(n,function(o){e(t).html(o)})}};e(window).on("load",function(){o.init(),o.loadPage("landing")}),e(window).on("resize",function(){o.sizer()})}(window.jQuery),function(e){var o={box:function(){e("body").append('\n        <div class="viewport">\n          <span id="t-width"></span> x <span id="t-height"></span>\n        </div>\n      ')},calculateDimensions:function(){var o=window.innerWidth,t=window.innerHeight;e("#t-width").html(o),e("#t-height").html(t)},init:function(){o.box(),o.sizer()},sizer:function(){o.calculateDimensions(),o.toggleBox()},toggleBox:function(){e(".viewport").click(function(){e(this).toggleClass("inactive")})}};e(window).on("load",function(){o.init()}),e(window).on("resize",function(){o.sizer()})}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzaXplci5qcyJdLCJuYW1lcyI6WyIkIiwiYXBwIiwiYmFzZVVybCIsIm5hbWUiLCJpbml0IiwiZG9Mb2dpbiIsImhhYml0RGFzaGJvYXJkIiwiZ2V0VXNlclBhZ2UiLCJsb2dvdXRIYW5kbGVyIiwic2lnblVwSGFuZGxlciIsImRvY3VtZW50Iiwib24iLCJyZW1vdmVDbGFzcyIsInRvZ2dsZUNsYXNzIiwicHJvcCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImxvZ2luSGFuZGxlciIsInRoZW4iLCJsb2FkRW5kcG9pbnQiLCJfdG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiUHJvbWlzZSIsInJlcyIsInJlaiIsImFqYXgiLCJoZWFkZXJzIiwiYWNjZXB0IiwiQXV0aG9yaXphdGlvbiIsInR5cGUiLCJ1cmwiLCJzdWNjZXNzIiwiaXRlbSIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIl9lcnJvciIsImxvYWRQYWdlIiwiX2Vycm9yMiIsIl9ib2R5IiwidXNlcm5hbWUiLCJ2YWwiLCJwYXNzd29yZCIsImNvbnRlbnRUeXBlIiwiZGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9maWxlIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJzZXRJdGVtIiwidG9rZW4iLCJfZXJyb3IzIiwiZW1wdHkiLCJhZGRDbGFzcyIsImFwcGVuZCIsInJlbW92ZUl0ZW0iLCJsb2NhdGlvbiIsInJlbG9hZCIsImJvZHkiLCJfZXJyb3I0IiwicGFnZSIsInRhcmdldCIsIl9wYWdlIiwiZ2V0IiwiaHRtbCIsIndpbmRvdyIsInNpemVyIiwialF1ZXJ5IiwiYm94IiwiY2FsY3VsYXRlRGltZW5zaW9ucyIsInciLCJpbm5lcldpZHRoIiwiaCIsImlubmVySGVpZ2h0IiwidG9nZ2xlQm94IiwiY2xpY2siLCJ0aGlzIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUVBLFNBQUFBLEdBRUEsSUFBQUMsR0FDQUMsUUFBQSx3QkFDQUMsS0FBQSxHQUNBQyxLQUFBLFdBQ0FI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RCxTQUFBLFVBQ0F2RCxFQUFBLG9CQUFBd0QsT0FBQSxzREFBQUksRUFBQVgsVUFBQSxJQUFBVyxFQUFBVixTQUFBLCtMQUNBekIsWUFPQWEsU0FBQSxTQUFBd0IsR0FDQSxJQUFBQyxFQUFBL0QsRUFBQSxTQUNBZ0UsRUFBQSxpQkFBQUYsRUFBQSxRQUVBOUQsRUFBQWlFLElBQUFELEVBQUEsU0FBQW5CLEdBQ0E3QyxFQUFBK0QsR0FBQUcsS0FBQXJCLE9BS0E3QyxFQUFBbUUsUUFBQXhELEdBQUEsT0FBQSxXQUNBVixFQUFBRyxPQUNBSCxFQUFBcUMsU0FBQSxhQUdBdEMsRUFBQW1FLFFBQUF4RCxHQUFBLFNBQUEsV0FDQVYsRUFBQW1FLFVBeE1BLENBME1BRCxPQUFBRSxRQzFNQSxTQUFBckUsR0FFQSxJQUFBQyxHQUNBcUUsSUFBQSxXQUNBdEUsRUFBQSxRQUFBd0QsT0FBQSxpSUFFQWUsb0JBQUEsV0FDQSxJQUFBQyxFQUFBTCxPQUFBTSxXQUNBQyxFQUFBUCxPQUFBUSxZQUNBM0UsRUFBQSxZQUFBa0UsS0FBQU0sR0FDQXhFLEVBQUEsYUFBQWtFLEtBQUFRLElBRUF0RSxLQUFBLFdBQ0FILEVBQUFxRSxNQUNBckUsRUFBQW1FLFNBRUFBLE1BQUEsV0FDQW5FLEVBQUFzRSxzQkFDQXRFLEVBQUEyRSxhQUVBQSxVQUFBLFdBQ0E1RSxFQUFBLGFBQUE2RSxNQUFBLFdBQ0E3RSxFQUFBOEUsTUFBQWpFLFlBQUEsZ0JBS0FiLEVBQUFtRSxRQUFBeEQsR0FBQSxPQUFBLFdBQ0FWLEVBQUFHLFNBR0FKLEVBQUFtRSxRQUFBeEQsR0FBQSxTQUFBLFdBQ0FWLEVBQUFtRSxVQWhDQSxDQWtDQUQsT0FBQUUiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgdmFyIGFwcCA9IHtcbiAgICBiYXNlVXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDA4JyxcbiAgICBuYW1lOiAnJyxcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgYXBwLmRvTG9naW4oKTtcbiAgICAgIGFwcC5oYWJpdERhc2hib2FyZCgpO1xuICAgICAgYXBwLmdldFVzZXJQYWdlKCk7XG4gICAgICBhcHAubG9nb3V0SGFuZGxlcigpO1xuICAgICAgYXBwLnNpZ25VcEhhbmRsZXIoKTtcbiAgICB9LFxuICAgIGRvTG9naW46IGZ1bmN0aW9uIGRvTG9naW4oKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3QtbG9naW4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKFwiI3QtbW9kYWwtc2lnbi11cFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJChcIiN0LW1vZGFsLWxvZ2luXCIpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKCcjdC1idXJnZXInKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgfSk7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3QtbW9kYWwtbG9naW4tYnV0dG9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJChcIiN0LW1vZGFsLWxvZ2luXCIpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKCcjdC1idXJnZXInKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgfSk7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3QtbW9kYWwtc2lnbi11cC1idXR0b24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKFwiI3QtbW9kYWwtc2lnbi11cFwiKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJCgnI3QtYnVyZ2VyJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgIH0pO1xuICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjbG9naW4tc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhcHAubG9naW5IYW5kbGVyKCkudGhlbihhcHAubG9hZEVuZHBvaW50KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFiaXREYXNoYm9hcmQ6IGZ1bmN0aW9uIGhhYml0RGFzaGJvYXJkKCkge1xuICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0LWhhYml0LWVudHJ5JywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICQoJyN0LWJ1cmdlcicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjdC1oYWJpdC1oaXN0b3J5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjdC1idXJnZXInKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRVc2VyUGFnZTogZnVuY3Rpb24gZ2V0VXNlclBhZ2UoKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignc3VibWl0JywgJyNnZXQtcHJvdGVjdGVkJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgX3Rva2VuID0gJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3VG9rZW4nKTtcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHtcbiAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgLy8gYmVmb3JlU2VuZDogKHJlcSkgPT4geyByZXEuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIiwgYXBwLnRva2VuKSB9LFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICBcImFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb247IG9kYXRhPXZlcmJvc2VcIixcbiAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IF90b2tlblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiBhcHAuYmFzZVVybCArICcvcHJvdGVjdGVkJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoaXRlbSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKTtcbiAgICAgICAgICAgICAgcmVzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKF9lcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfZXJyb3IpO1xuICAgICAgICAgICAgICByZWooKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBsb2FkRW5kcG9pbnQ6IGZ1bmN0aW9uIGxvYWRFbmRwb2ludCgpIHtcbiAgICAgIHZhciBfdG9rZW4gPSAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnandUb2tlbicpO1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAvLyBiZWZvcmVTZW5kOiAocmVxKSA9PiB7IHJlcS5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBhcHAudG9rZW4pIH0sXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJhY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBvZGF0YT12ZXJib3NlXCIsXG4gICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogX3Rva2VuXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICB1cmw6IGFwcC5iYXNlVXJsICsgJy9oYWJpdCcsXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhpdGVtKSB7XG4gICAgICAgICAgICBhcHAubG9hZFBhZ2UoJ2hhYml0Jyk7XG4gICAgICAgICAgICByZXMoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3IyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhfZXJyb3IyKTtcbiAgICAgICAgICAgIHJlaigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH0sXG4gICAgbG9naW5IYW5kbGVyOiBmdW5jdGlvbiBsb2dpbkhhbmRsZXIoKSB7XG4gICAgICB2YXIgX2JvZHkgPSB7XG4gICAgICAgIHVzZXJuYW1lOiAkKCcjbG9naW4tdXNlcm5hbWUnKS52YWwoKSxcbiAgICAgICAgcGFzc3dvcmQ6ICQoJyNsb2dpbi1wYXNzd29yZCcpLnZhbCgpXG4gICAgICB9O1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXG4gICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoX2JvZHkpLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiYWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvbjsgb2RhdGE9dmVyYm9zZVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDA4L2F1dGgvbG9naW4nLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgYXBwLm5hbWUgPSBkYXRhLnByb2ZpbGUuZmlyc3ROYW1lICsgJyAnICsgZGF0YS5wcm9maWxlLmxhc3ROYW1lO1xuICAgICAgICAgICAgJCgnI2xvZ2luLXVzZXJuYW1lJykudmFsKCcnKTtcbiAgICAgICAgICAgICQoJyNsb2dpbi1wYXNzd29yZCcpLnZhbCgnJyk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnandUb2tlbicsIGRhdGEucHJvZmlsZS50b2tlbik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnV2VsY29tZSAnICsgYXBwLm5hbWUgKyAnISBZb3UgYXJlIG5vdyBsb2dnZWQgaW4uJyk7XG4gICAgICAgICAgICByZXMoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3IzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhfZXJyb3IzKTtcbiAgICAgICAgICAgICQoXCIjdC1tb2RhbC1sb2dpblwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmVtcHR5KCk7XG4gICAgICAgICAgICAkKFwiI3QtbW9kYWwtbWVzc2FnZVwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmFwcGVuZCgnXFxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJ0LW1vZGFsLWxvZ2luLWZhaWxcIj5Zb3VyIGxvZ2luIGF0dGVtcHQgaGFzIGZhaWxlZCwgcGxlYXNlIHRyeSBhZ2Fpbi48L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGEgaWQ9XCJ0LW1vZGFsLWxvZ2luLWJ1dHRvblwiPkxvZ2luPC9hPlxcbiAgICAgICAgICAgICAgICAnKTtcbiAgICAgICAgICAgIHJlaigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH0sXG4gICAgbG9nb3V0SGFuZGxlcjogZnVuY3Rpb24gbG9nb3V0SGFuZGxlcigpIHtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjdC1sb2dvdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdqd1Rva2VuJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdZb3UgYXJlIG5vdyBsb2dnZWQgb3V0LicpO1xuICAgICAgICBhcHAubmFtZSA9ICcnO1xuICAgICAgICBsb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHNpZ25VcEhhbmRsZXI6IGZ1bmN0aW9uIHNpZ25VcEhhbmRsZXIoKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3Qtc2lnbi11cCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICQoXCIjdC1tb2RhbC1sb2dpblwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJChcIiN0LW1vZGFsLXNpZ24tdXBcIikudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICQoJyN0LWJ1cmdlcicpLnByb3AoJ2NoZWNrZWQnLCBmYWxzZSk7XG4gICAgICB9KTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCAnI3NpZ24tdXAtc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgYm9keSA9IHtcbiAgICAgICAgICBmaXJzdE5hbWU6ICQoJyNmaXJzdE5hbWUnKS52YWwoKSxcbiAgICAgICAgICBsYXN0TmFtZTogJCgnI2xhc3ROYW1lJykudmFsKCksXG4gICAgICAgICAgcGFzc3dvcmQ6ICQoJyNwYXNzd29yZCcpLnZhbCgpLFxuICAgICAgICAgIHVzZXJuYW1lOiAkKCcjdXNlcm5hbWUnKS52YWwoKVxuICAgICAgICB9O1xuICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikge1xuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgXCJhY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uOyBvZGF0YT12ZXJib3NlXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IGFwcC5iYXNlVXJsICsgJy91c2Vycy9yZWdpc3RlcicsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1RoYW5rIHlvdSAnICsgYm9keS5maXJzdE5hbWUgKyAnICcgKyBib2R5Lmxhc3ROYW1lICsgJyEgWW91ciBhY2NvdW50IGhhcyBiZWVuIGNyZWF0ZWQuJyk7XG4gICAgICAgICAgICAgICQoJyNmaXJzdE5hbWUnKS52YWwoJycpO1xuICAgICAgICAgICAgICAkKCcjbGFzdE5hbWUnKS52YWwoJycpO1xuICAgICAgICAgICAgICAkKCcjdXNlcm5hbWUnKS52YWwoJycpO1xuICAgICAgICAgICAgICAkKCcjcGFzc3dvcmQnKS52YWwoJycpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtc2lnbi11cFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuZW1wdHkoKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmFwcGVuZCgnXFxuICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cInQtbW9kYWwtc2lnbi11cC1zdWNjZXNzXCI+VGhhbmsgeW91ICcgKyBib2R5LmZpcnN0TmFtZSArICcgJyArIGJvZHkubGFzdE5hbWUgKyAnISBZb3VyIGFjY291bnQgaGFzIGJlZW4gY3JlYXRlZC48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICA8YSBpZD1cInQtbW9kYWwtbG9naW4tYnV0dG9uXCI+TG9naW48L2E+XFxuICAgICAgICAgICAgICAgICAgJyk7XG4gICAgICAgICAgICAgIHJlcygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3I0KSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9lcnJvcjQpO1xuICAgICAgICAgICAgICAkKFwiI3QtbW9kYWwtc2lnbi11cFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuZW1wdHkoKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLW1lc3NhZ2VcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1tZXNzYWdlXCIpLmFwcGVuZCgnXFxuICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cInQtbW9kYWwtc2lnbi11cC1mYWlsXCI+JyArIGJvZHkuZmlyc3ROYW1lICsgJyAnICsgYm9keS5sYXN0TmFtZSArICcsIEVpdGhlciB5b3VyIHBhc3N3b3JkIG5lZWRzIHRvIGJlIHRlbiBjaGFyYWN0ZXJzIGxvbmcsIG9yIHlvdXIgdXNlcm5hbWUgaGFzIGFscmVhZHkgYmVlbiBzZWxlY3RlZC48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICA8YSBpZD1cInQtbW9kYWwtc2lnbi11cC1idXR0b25cIj5TaWduLXVwPC9hPlxcbiAgICAgICAgICAgICAgICAgICcpO1xuICAgICAgICAgICAgICByZWooKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBsb2FkUGFnZTogZnVuY3Rpb24gbG9hZFBhZ2UocGFnZSkge1xuICAgICAgdmFyIHRhcmdldCA9ICQoJyNyb290Jyk7XG4gICAgICB2YXIgX3BhZ2UgPSAnc3JjL3RlbXBsYXRlcy8nICsgcGFnZSArICcuaHRtbCc7XG4gICAgICAvLyAkKHRhcmdldCkuaHRtbChfcGFnZSk7XG4gICAgICAkLmdldChfcGFnZSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgJCh0YXJnZXQpLmh0bWwoZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgIGFwcC5pbml0KCk7XG4gICAgYXBwLmxvYWRQYWdlKFwibGFuZGluZ1wiKTtcbiAgfSk7XG5cbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgYXBwLnNpemVyKCk7IC8vYzAwN1xuICB9KTtcbn0pKHdpbmRvdy5qUXVlcnkpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCQpIHtcblxuICB2YXIgYXBwID0ge1xuICAgIGJveDogZnVuY3Rpb24gYm94KCkge1xuICAgICAgJCgnYm9keScpLmFwcGVuZChcIlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwidmlld3BvcnRcXFwiPlxcbiAgICAgICAgICA8c3BhbiBpZD1cXFwidC13aWR0aFxcXCI+PC9zcGFuPiB4IDxzcGFuIGlkPVxcXCJ0LWhlaWdodFxcXCI+PC9zcGFuPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgXCIpO1xuICAgIH0sXG4gICAgY2FsY3VsYXRlRGltZW5zaW9uczogZnVuY3Rpb24gY2FsY3VsYXRlRGltZW5zaW9ucygpIHtcbiAgICAgIHZhciB3ID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICB2YXIgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICQoXCIjdC13aWR0aFwiKS5odG1sKHcpO1xuICAgICAgJChcIiN0LWhlaWdodFwiKS5odG1sKGgpO1xuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIGFwcC5ib3goKTtcbiAgICAgIGFwcC5zaXplcigpO1xuICAgIH0sXG4gICAgc2l6ZXI6IGZ1bmN0aW9uIHNpemVyKCkge1xuICAgICAgYXBwLmNhbGN1bGF0ZURpbWVuc2lvbnMoKTtcbiAgICAgIGFwcC50b2dnbGVCb3goKTtcbiAgICB9LFxuICAgIHRvZ2dsZUJveDogZnVuY3Rpb24gdG9nZ2xlQm94KCkge1xuICAgICAgJCgnLnZpZXdwb3J0JykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdpbmFjdGl2ZScpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBhcHAuaW5pdCgpOyAvL2MwMjhcbiAgfSk7XG5cbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgYXBwLnNpemVyKCk7IC8vYzAyOFxuICB9KTtcbn0pKHdpbmRvdy5qUXVlcnkpOyJdfQ==
