"use strict";!function(o){var e={baseUrl:"http://localhost:3008",name:"",init:function(){e.doLogin(),e.getProtected(),e.logoutHandler(),e.signUpHandler()},doLogin:function(){o(document).on("click","#t-login",function(){o("#t-modal-sign-up").removeClass("active"),o("#t-modal-login").toggleClass("active"),o("#t-burger").prop("checked",!1)}),o(document).on("submit","#login-submit",function(o){o.preventDefault(),e.loginHandler().then(e.loadEndpoint)})},getProtected:function(){o(document).on("submit","#get-protected",function(n){n.preventDefault();var t="Bearer "+localStorage.getItem("jwToken");return new Promise(function(n,a){o.ajax({headers:{accept:"application/json; odata=verbose",Authorization:t},type:"GET",url:e.baseUrl+"/protected",success:function(o){console.log(o),n()},error:function(o){console.log(o),a()}})})})},loadEndpoint:function(){var n="Bearer "+localStorage.getItem("jwToken");return new Promise(function(t,a){o.ajax({headers:{accept:"application/json; odata=verbose",Authorization:n},type:"GET",url:e.baseUrl+"/protected",success:function(o){e.loadPage("protected"),t()},error:function(o){console.log(o),a()}})})},loginHandler:function(){var n={username:o("#login-username").val(),password:o("#login-password").val()};return new Promise(function(t,a){o.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(n),headers:{accept:"application/json; odata=verbose"},type:"POST",url:"http://localhost:3008/auth/login",success:function(n){e.name=n.profile.firstName+" "+n.profile.lastName,o("#login-username").val(""),o("#login-password").val(""),localStorage.setItem("jwToken",n.profile.token),console.log("Welcome "+e.name+"! You are now logged in."),t()},error:function(o){console.log(o),a()}})})},logoutHandler:function(){o(document).on("submit","#do-logout",function(o){o.preventDefault(),localStorage.removeItem("jwToken"),console.log("You are now logged out."),e.name="",location.reload(!0)})},signUpHandler:function(){o(document).on("click","#t-sign-up",function(){o("#t-modal-login").removeClass("active"),o("#t-modal-sign-up").toggleClass("active"),o("#t-burger").prop("checked",!1)}),o(document).on("submit","#sign-up-submit",function(n){n.preventDefault();var t={firstName:o("#firstName").val(),lastName:o("#lastName").val(),password:o("#password").val(),username:o("#username").val()};return new Promise(function(n,a){o.ajax({contentType:"application/json; charset=utf-8",data:JSON.stringify(t),headers:{accept:"application/json; odata=verbose"},type:"POST",url:e.baseUrl+"/users/register",success:function(e){console.log("Thank you "+t.firstName+" "+t.lastName+"! Your account has been created."),o("#firstName").val(""),o("#lastName").val(""),o("#username").val(""),o("#password").val(""),o("#t-modal-login").addClass("active"),o("#t-modal-sign-up").removeClass("active"),n()},error:function(o){console.log(o),a()}})})})},loadPage:function(e){var n=o("#root"),t="src/templates/"+e+".html";o.get(t,function(e){o(n).html(e)})}};o(window).on("load",function(){e.init(),e.loadPage("landing")}),o(window).on("resize",function(){e.sizer()})}(window.jQuery),function(o){var e={box:function(){o("body").append('\n        <div class="viewport">\n          <span id="t-width"></span> x <span id="t-height"></span>\n        </div>\n      ')},calculateDimensions:function(){var e=window.innerWidth,n=window.innerHeight;o("#t-width").html(e),o("#t-height").html(n)},init:function(){e.box(),e.sizer()},sizer:function(){e.calculateDimensions(),e.toggleBox()},toggleBox:function(){o(".viewport").click(function(){o(this).toggleClass("inactive")})}};o(window).on("load",function(){e.init()}),o(window).on("resize",function(){e.sizer()})}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzaXplci5qcyJdLCJuYW1lcyI6WyIkIiwiYXBwIiwiYmFzZVVybCIsIm5hbWUiLCJpbml0IiwiZG9Mb2dpbiIsImdldFByb3RlY3RlZCIsImxvZ291dEhhbmRsZXIiLCJzaWduVXBIYW5kbGVyIiwiZG9jdW1lbnQiLCJvbiIsInJlbW92ZUNsYXNzIiwidG9nZ2xlQ2xhc3MiLCJwcm9wIiwiZSIsInByZXZlbnREZWZhdWx0IiwibG9naW5IYW5kbGVyIiwidGhlbiIsImxvYWRFbmRwb2ludCIsIl90b2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJQcm9taXNlIiwicmVzIiwicmVqIiwiYWpheCIsImhlYWRlcnMiLCJhY2NlcHQiLCJBdXRob3JpemF0aW9uIiwidHlwZSIsInVybCIsInN1Y2Nlc3MiLCJpdGVtIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiX2Vycm9yIiwibG9hZFBhZ2UiLCJfZXJyb3IyIiwiX2JvZHkiLCJ1c2VybmFtZSIsInZhbCIsInBhc3N3b3JkIiwiY29udGVudFR5cGUiLCJkYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsInByb2ZpbGUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInNldEl0ZW0iLCJ0b2tlbiIsIl9lcnJvcjMiLCJyZW1vdmVJdGVtIiwibG9jYXRpb24iLCJyZWxvYWQiLCJib2R5IiwiYWRkQ2xhc3MiLCJfZXJyb3I0IiwicGFnZSIsInRhcmdldCIsIl9wYWdlIiwiZ2V0IiwiaHRtbCIsIndpbmRvdyIsInNpemVyIiwialF1ZXJ5IiwiYm94IiwiYXBwZW5kIiwiY2FsY3VsYXRlRGltZW5zaW9ucyIsInciLCJpbm5lcldpZHRoIiwiaCIsImlubmVySGVpZ2h0IiwidG9nZ2xlQm94IiwiY2xpY2siLCJ0aGlzIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUVBLFNBQUFBLEdBRUEsSUFBQUMsR0FDQUMsUUFBQSx3QkFDQUMsS0FBQSxHQUNBQyxLQUFBLFdBQ0FILEVBQUFJLFVBQ0FKLEVBQUFLLGVBQ0FM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aWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgkKSB7XG5cbiAgdmFyIGFwcCA9IHtcbiAgICBiYXNlVXJsOiAnaHR0cDovL2xvY2FsaG9zdDozMDA4JyxcbiAgICBuYW1lOiAnJyxcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgYXBwLmRvTG9naW4oKTtcbiAgICAgIGFwcC5nZXRQcm90ZWN0ZWQoKTtcbiAgICAgIGFwcC5sb2dvdXRIYW5kbGVyKCk7XG4gICAgICBhcHAuc2lnblVwSGFuZGxlcigpO1xuICAgIH0sXG4gICAgZG9Mb2dpbjogZnVuY3Rpb24gZG9Mb2dpbigpIHtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjdC1sb2dpbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiN0LW1vZGFsLXNpZ24tdXBcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICQoXCIjdC1tb2RhbC1sb2dpblwiKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJCgnI3QtYnVyZ2VyJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgIH0pO1xuXG4gICAgICAkKGRvY3VtZW50KS5vbignc3VibWl0JywgJyNsb2dpbi1zdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGFwcC5sb2dpbkhhbmRsZXIoKS50aGVuKGFwcC5sb2FkRW5kcG9pbnQpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRQcm90ZWN0ZWQ6IGZ1bmN0aW9uIGdldFByb3RlY3RlZCgpIHtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdzdWJtaXQnLCAnI2dldC1wcm90ZWN0ZWQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBfdG9rZW4gPSAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnandUb2tlbicpO1xuICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikge1xuICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAvLyBiZWZvcmVTZW5kOiAocmVxKSA9PiB7IHJlcS5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBhcHAudG9rZW4pIH0sXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgIFwiYWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvbjsgb2RhdGE9dmVyYm9zZVwiLFxuICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogX3Rva2VuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6IGFwcC5iYXNlVXJsICsgJy9wcm90ZWN0ZWQnLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhpdGVtKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0pO1xuICAgICAgICAgICAgICByZXMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoX2Vycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9lcnJvcik7XG4gICAgICAgICAgICAgIHJlaigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGxvYWRFbmRwb2ludDogZnVuY3Rpb24gbG9hZEVuZHBvaW50KCkge1xuICAgICAgdmFyIF90b2tlbiA9ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdqd1Rva2VuJyk7XG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgIC8vIGJlZm9yZVNlbmQ6IChyZXEpID0+IHsgcmVxLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIGFwcC50b2tlbikgfSxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcImFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb247IG9kYXRhPXZlcmJvc2VcIixcbiAgICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBfdG9rZW5cbiAgICAgICAgICB9LFxuICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgIHVybDogYXBwLmJhc2VVcmwgKyAnL3Byb3RlY3RlZCcsXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhpdGVtKSB7XG4gICAgICAgICAgICBhcHAubG9hZFBhZ2UoJ3Byb3RlY3RlZCcpO1xuICAgICAgICAgICAgcmVzKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoX2Vycm9yMikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coX2Vycm9yMik7XG4gICAgICAgICAgICByZWooKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9LFxuICAgIGxvZ2luSGFuZGxlcjogZnVuY3Rpb24gbG9naW5IYW5kbGVyKCkge1xuICAgICAgdmFyIF9ib2R5ID0ge1xuICAgICAgICB1c2VybmFtZTogJCgnI2xvZ2luLXVzZXJuYW1lJykudmFsKCksXG4gICAgICAgIHBhc3N3b3JkOiAkKCcjbG9naW4tcGFzc3dvcmQnKS52YWwoKVxuICAgICAgfTtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLFxuICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KF9ib2R5KSxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcImFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb247IG9kYXRhPXZlcmJvc2VcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwOC9hdXRoL2xvZ2luJyxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcbiAgICAgICAgICAgIGFwcC5uYW1lID0gZGF0YS5wcm9maWxlLmZpcnN0TmFtZSArICcgJyArIGRhdGEucHJvZmlsZS5sYXN0TmFtZTtcbiAgICAgICAgICAgICQoJyNsb2dpbi11c2VybmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAkKCcjbG9naW4tcGFzc3dvcmQnKS52YWwoJycpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2p3VG9rZW4nLCBkYXRhLnByb2ZpbGUudG9rZW4pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1dlbGNvbWUgJyArIGFwcC5uYW1lICsgJyEgWW91IGFyZSBub3cgbG9nZ2VkIGluLicpO1xuICAgICAgICAgICAgcmVzKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoX2Vycm9yMykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coX2Vycm9yMyk7XG4gICAgICAgICAgICByZWooKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9LFxuICAgIGxvZ291dEhhbmRsZXI6IGZ1bmN0aW9uIGxvZ291dEhhbmRsZXIoKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignc3VibWl0JywgJyNkby1sb2dvdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdqd1Rva2VuJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdZb3UgYXJlIG5vdyBsb2dnZWQgb3V0LicpO1xuICAgICAgICBhcHAubmFtZSA9ICcnO1xuICAgICAgICBsb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHNpZ25VcEhhbmRsZXI6IGZ1bmN0aW9uIHNpZ25VcEhhbmRsZXIoKSB7XG4gICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3Qtc2lnbi11cCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiN0LW1vZGFsLWxvZ2luXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKFwiI3QtbW9kYWwtc2lnbi11cFwiKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJCgnI3QtYnVyZ2VyJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgIH0pO1xuICAgICAgJChkb2N1bWVudCkub24oJ3N1Ym1pdCcsICcjc2lnbi11cC1zdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBib2R5ID0ge1xuICAgICAgICAgIGZpcnN0TmFtZTogJCgnI2ZpcnN0TmFtZScpLnZhbCgpLFxuICAgICAgICAgIGxhc3ROYW1lOiAkKCcjbGFzdE5hbWUnKS52YWwoKSxcbiAgICAgICAgICBwYXNzd29yZDogJCgnI3Bhc3N3b3JkJykudmFsKCksXG4gICAgICAgICAgdXNlcm5hbWU6ICQoJyN1c2VybmFtZScpLnZhbCgpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIixcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICBcImFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb247IG9kYXRhPXZlcmJvc2VcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogYXBwLmJhc2VVcmwgKyAnL3VzZXJzL3JlZ2lzdGVyJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZGF0YSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVGhhbmsgeW91ICcgKyBib2R5LmZpcnN0TmFtZSArICcgJyArIGJvZHkubGFzdE5hbWUgKyAnISBZb3VyIGFjY291bnQgaGFzIGJlZW4gY3JlYXRlZC4nKTtcbiAgICAgICAgICAgICAgJCgnI2ZpcnN0TmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICQoJyNsYXN0TmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICQoJyN1c2VybmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICQoJyNwYXNzd29yZCcpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICQoXCIjdC1tb2RhbC1sb2dpblwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgJChcIiN0LW1vZGFsLXNpZ24tdXBcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgIHJlcygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihfZXJyb3I0KSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9lcnJvcjQpO1xuICAgICAgICAgICAgICByZWooKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBsb2FkUGFnZTogZnVuY3Rpb24gbG9hZFBhZ2UocGFnZSkge1xuICAgICAgdmFyIHRhcmdldCA9ICQoJyNyb290Jyk7XG4gICAgICB2YXIgX3BhZ2UgPSAnc3JjL3RlbXBsYXRlcy8nICsgcGFnZSArICcuaHRtbCc7XG4gICAgICAvLyAkKHRhcmdldCkuaHRtbChfcGFnZSk7XG4gICAgICAkLmdldChfcGFnZSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgJCh0YXJnZXQpLmh0bWwoZGF0YSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgIGFwcC5pbml0KCk7XG4gICAgYXBwLmxvYWRQYWdlKFwibGFuZGluZ1wiKTtcbiAgfSk7XG5cbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgYXBwLnNpemVyKCk7IC8vYzAwN1xuICB9KTtcbn0pKHdpbmRvdy5qUXVlcnkpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCQpIHtcblxuICB2YXIgYXBwID0ge1xuICAgIGJveDogZnVuY3Rpb24gYm94KCkge1xuICAgICAgJCgnYm9keScpLmFwcGVuZChcIlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwidmlld3BvcnRcXFwiPlxcbiAgICAgICAgICA8c3BhbiBpZD1cXFwidC13aWR0aFxcXCI+PC9zcGFuPiB4IDxzcGFuIGlkPVxcXCJ0LWhlaWdodFxcXCI+PC9zcGFuPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgXCIpO1xuICAgIH0sXG4gICAgY2FsY3VsYXRlRGltZW5zaW9uczogZnVuY3Rpb24gY2FsY3VsYXRlRGltZW5zaW9ucygpIHtcbiAgICAgIHZhciB3ID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICB2YXIgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICQoXCIjdC13aWR0aFwiKS5odG1sKHcpO1xuICAgICAgJChcIiN0LWhlaWdodFwiKS5odG1sKGgpO1xuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIGFwcC5ib3goKTtcbiAgICAgIGFwcC5zaXplcigpO1xuICAgIH0sXG4gICAgc2l6ZXI6IGZ1bmN0aW9uIHNpemVyKCkge1xuICAgICAgYXBwLmNhbGN1bGF0ZURpbWVuc2lvbnMoKTtcbiAgICAgIGFwcC50b2dnbGVCb3goKTtcbiAgICB9LFxuICAgIHRvZ2dsZUJveDogZnVuY3Rpb24gdG9nZ2xlQm94KCkge1xuICAgICAgJCgnLnZpZXdwb3J0JykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdpbmFjdGl2ZScpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBhcHAuaW5pdCgpOyAvL2MwMjhcbiAgfSk7XG5cbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgYXBwLnNpemVyKCk7IC8vYzAyOFxuICB9KTtcbn0pKHdpbmRvdy5qUXVlcnkpOyJdfQ==
